(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();const na=!1;var Wr=Array.isArray,Bs=Array.prototype.indexOf,Yr=Array.from,Ba=Object.defineProperty,Nn=Object.getOwnPropertyDescriptor,Ha=Object.getOwnPropertyDescriptors,Hs=Object.prototype,Gs=Array.prototype,ga=Object.getPrototypeOf,Ea=Object.isExtensible;const cr=()=>{};function Ws(t){return t()}function ra(t){for(var n=0;n<t.length;n++)t[n]()}function Ga(){var t,n,r=new Promise((a,o)=>{t=a,n=o});return{promise:r,resolve:t,reject:n}}const Et=2,pa=4,Ur=8,Ys=1<<24,kn=16,Tn=32,Kn=64,Vr=128,Qt=512,It=1024,Dt=2048,en=4096,Wt=8192,yn=16384,ha=32768,Wn=65536,$a=1<<17,Wa=1<<18,hr=1<<19,Ya=1<<20,bn=1<<25,Yn=32768,aa=1<<21,ma=1<<22,Ln=1<<23,qn=Symbol("$state"),Us=Symbol("legacy props"),Vs=Symbol(""),sr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function _a(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Xs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ks(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Zs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Js(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Qs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ei(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function ti(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ni(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ri(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ai(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const si=1,ii=2,Ua=4,oi=8,li=16,ci=1,ui=2,vi=4,di=8,fi=16,Va=1,gi=2,Ct=Symbol(),pi="http://www.w3.org/1999/xhtml";function hi(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Xa(t){return t===this.v}function Ka(t,n){return t!=t?n==n:t!==n||t!==null&&typeof t=="object"||typeof t=="function"}function Za(t){return!Ka(t,this.v)}let mr=!1,mi=!1;function _i(){mr=!0}let ot=null;function vr(t){ot=t}function $t(t,n=!1,r){ot={p:ot,i:!1,c:null,e:null,s:t,x:null,l:mr&&!n?{s:null,u:null,$:[]}:null}}function Mt(t){var n=ot,r=n.e;if(r!==null){n.e=null;for(var a of r)us(a)}return t!==void 0&&(n.x=t),n.i=!0,ot=n.p,t??{}}function Ar(){return!mr||ot!==null&&ot.l===null}let ir=[];function bi(){var t=ir;ir=[],ra(t)}function _r(t){if(ir.length===0){var n=ir;queueMicrotask(()=>{n===ir&&bi()})}ir.push(t)}function Ja(t){var n=Ve;if(n===null)return je.f|=Ln,t;if((n.f&ha)===0){if((n.f&Vr)===0)throw t;n.b.error(t)}else dr(t,n)}function dr(t,n){for(;n!==null;){if((n.f&Vr)!==0)try{n.b.error(t);return}catch(r){t=r}n=n.parent}throw t}const Rr=new Set;let vt=null,Xt=null,sn=[],ba=null,sa=!1;class on{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#s=new Set;#a=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(n){sn=[],this.apply();var r={parent:null,effect:null,effects:[],render_effects:[]};for(const a of n)this.#i(a,r);this.is_fork||this.#u(),this.is_deferred()?(this.#o(r.effects),this.#o(r.render_effects)):(vt=null,Ma(r.render_effects),Ma(r.effects),this.#l?.resolve()),Xt=null}#i(n,r){n.f^=It;for(var a=n.first;a!==null;){var o=a.f,i=(o&(Tn|Kn))!==0,l=i&&(o&It)!==0,f=l||(o&Wt)!==0||this.skipped_effects.has(a);if((a.f&Vr)!==0&&a.b?.is_pending()&&(r={parent:r,effect:a,effects:[],render_effects:[]}),!f&&a.fn!==null){i?a.f^=It:(o&pa)!==0?r.effects.push(a):br(a)&&((a.f&kn)!==0&&this.#s.add(a),gr(a));var u=a.first;if(u!==null){a=u;continue}}var c=a.parent;for(a=a.next;a===null&&c!==null;)c===r.effect&&(this.#o(r.effects),this.#o(r.render_effects),r=r.parent),a=c.next,c=c.parent}}#o(n){for(const r of n)(r.f&Dt)!==0?this.#s.add(r):(r.f&en)!==0&&this.#a.add(r),this.#c(r.deps),zt(r,It)}#c(n){if(n!==null)for(const r of n)(r.f&Et)===0||(r.f&Yn)===0||(r.f^=Yn,this.#c(r.deps))}capture(n,r){this.previous.has(n)||this.previous.set(n,r),(n.f&Ln)===0&&(this.current.set(n,n.v),Xt?.set(n,n.v))}activate(){vt=this,this.apply()}deactivate(){vt===this&&(vt=null,Xt=null)}flush(){if(this.activate(),sn.length>0){if(yi(),vt!==null&&vt!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const n of this.#t)n(this);this.#t.clear()}#u(){if(this.#n===0){for(const n of this.#e)n();this.#e.clear()}this.#r===0&&this.#v()}#v(){if(Rr.size>1){this.previous.clear();var n=Xt,r=!0,a={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Rr){if(i===this){r=!1;continue}const l=[];for(const[u,c]of this.current){if(i.current.has(u))if(r&&c!==i.current.get(u))i.current.set(u,c);else continue;l.push(u)}if(l.length===0)continue;const f=[...i.current.keys()].filter(u=>!this.current.has(u));if(f.length>0){var o=sn;sn=[];const u=new Set,c=new Map;for(const h of l)Qa(h,f,u,c);if(sn.length>0){vt=i,i.apply();for(const h of sn)i.#i(h,a);i.deactivate()}sn=o}}vt=null,Xt=n}this.committed=!0,Rr.delete(this)}increment(n){this.#r+=1,n&&(this.#n+=1)}decrement(n){this.#r-=1,n&&(this.#n-=1),this.revive()}revive(){for(const n of this.#s)this.#a.delete(n),zt(n,Dt),Un(n);for(const n of this.#a)zt(n,en),Un(n);this.flush()}oncommit(n){this.#e.add(n)}ondiscard(n){this.#t.add(n)}settled(){return(this.#l??=Ga()).promise}static ensure(){if(vt===null){const n=vt=new on;Rr.add(vt),on.enqueue(()=>{vt===n&&n.flush()})}return vt}static enqueue(n){_r(n)}apply(){}}function yi(){var t=Bn;sa=!0;var n=null;try{var r=0;for(Br(!0);sn.length>0;){var a=on.ensure();if(r++>1e3){var o,i;wi()}a.process(sn),An.clear()}}finally{sa=!1,Br(t),ba=null}}function wi(){try{Qs()}catch(t){dr(t,ba)}}let mn=null;function Ma(t){var n=t.length;if(n!==0){for(var r=0;r<n;){var a=t[r++];if((a.f&(yn|Wt))===0&&br(a)&&(mn=new Set,gr(a),a.deps===null&&a.first===null&&a.nodes===null&&(a.teardown===null&&a.ac===null?fs(a):a.fn=null),mn?.size>0)){An.clear();for(const o of mn){if((o.f&(yn|Wt))!==0)continue;const i=[o];let l=o.parent;for(;l!==null;)mn.has(l)&&(mn.delete(l),i.push(l)),l=l.parent;for(let f=i.length-1;f>=0;f--){const u=i[f];(u.f&(yn|Wt))===0&&gr(u)}}mn.clear()}}mn=null}}function Qa(t,n,r,a){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(const o of t.reactions){const i=o.f;(i&Et)!==0?Qa(o,n,r,a):(i&(ma|kn))!==0&&(i&Dt)===0&&es(o,n,a)&&(zt(o,Dt),Un(o))}}function es(t,n,r){const a=r.get(t);if(a!==void 0)return a;if(t.deps!==null)for(const o of t.deps){if(n.includes(o))return!0;if((o.f&Et)!==0&&es(o,n,r))return r.set(o,!0),!0}return r.set(t,!1),!1}function Un(t){for(var n=ba=t;n.parent!==null;){n=n.parent;var r=n.f;if(sa&&n===Ve&&(r&kn)!==0&&(r&Wa)===0)return;if((r&(Kn|Tn))!==0){if((r&It)===0)return;n.f^=It}}sn.push(n)}function xi(t){let n=0,r=Vn(0),a;return()=>{Cr()&&(e(r),Zr(()=>(n===0&&(a=w(()=>t(()=>$r(r)))),n+=1,()=>{_r(()=>{n-=1,n===0&&(a?.(),a=void 0,$r(r))})})))}}var ki=Wn|hr|Vr;function Ti(t,n,r){new Si(t,n,r)}class Si{parent;#e=!1;#t;#r=null;#n;#l;#s;#a=null;#i=null;#o=null;#c=null;#u=null;#v=0;#d=0;#g=!1;#f=null;#b=xi(()=>(this.#f=Vn(this.#v),()=>{this.#f=null}));constructor(n,r,a){this.#t=n,this.#n=r,this.#l=a,this.parent=Ve.b,this.#e=!!this.#n.pending,this.#s=Jr(()=>{Ve.b=this;{var o=this.#m();try{this.#a=Vt(()=>a(o))}catch(i){this.error(i)}this.#d>0?this.#h():this.#e=!1}return()=>{this.#u?.remove()}},ki)}#y(){try{this.#a=Vt(()=>this.#l(this.#t))}catch(n){this.error(n)}this.#e=!1}#w(){const n=this.#n.pending;n&&(this.#i=Vt(()=>n(this.#t)),on.enqueue(()=>{var r=this.#m();this.#a=this.#p(()=>(on.ensure(),Vt(()=>this.#l(r)))),this.#d>0?this.#h():(Dn(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#m(){var n=this.#t;return this.#e&&(this.#u=wn(),this.#t.before(this.#u),n=this.#u),n}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(n){var r=Ve,a=je,o=ot;un(this.#s),Nt(this.#s),vr(this.#s.ctx);try{return n()}catch(i){return Ja(i),null}finally{un(r),Nt(a),vr(o)}}#h(){const n=this.#n.pending;this.#a!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),hs(this.#a,this.#c)),this.#i===null&&(this.#i=Vt(()=>n(this.#t)))}#_(n){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(n);return}this.#d+=n,this.#d===0&&(this.#e=!1,this.#i&&Dn(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(n){this.#_(n),this.#v+=n,this.#f&&fr(this.#f,this.#v)}get_effect_pending(){return this.#b(),e(this.#f)}error(n){var r=this.#n.onerror;let a=this.#n.failed;if(this.#g||!r&&!a)throw n;this.#a&&(qt(this.#a),this.#a=null),this.#i&&(qt(this.#i),this.#i=null),this.#o&&(qt(this.#o),this.#o=null);var o=!1,i=!1;const l=()=>{if(o){hi();return}o=!0,i&&ai(),on.ensure(),this.#v=0,this.#o!==null&&Dn(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#a=this.#p(()=>(this.#g=!1,Vt(()=>this.#l(this.#t)))),this.#d>0?this.#h():this.#e=!1};var f=je;try{Nt(null),i=!0,r?.(n,l),i=!1}catch(u){dr(u,this.#s&&this.#s.parent)}finally{Nt(f)}a&&_r(()=>{this.#o=this.#p(()=>{on.ensure(),this.#g=!0;try{return Vt(()=>{a(this.#t,()=>n,()=>l)})}catch(u){return dr(u,this.#s.parent),null}finally{this.#g=!1}})})}}function Ii(t,n,r,a){const o=Ar()?Xr:Jt;if(r.length===0&&t.length===0){a(n.map(o));return}var i=vt,l=Ve,f=zi();function u(){Promise.all(r.map(c=>Ei(c))).then(c=>{f();try{a([...n.map(o),...c])}catch(h){(l.f&yn)===0&&dr(h,l)}i?.deactivate(),Dr()}).catch(c=>{dr(c,l)})}t.length>0?Promise.all(t).then(()=>{f();try{return u()}finally{i?.deactivate(),Dr()}}):u()}function zi(){var t=Ve,n=je,r=ot,a=vt;return function(i=!0){un(t),Nt(n),vr(r),i&&a?.activate()}}function Dr(){un(null),Nt(null),vr(null)}function Xr(t){var n=Et|Dt,r=je!==null&&(je.f&Et)!==0?je:null;return Ve!==null&&(Ve.f|=hr),{ctx:ot,deps:null,effects:null,equals:Xa,f:n,fn:t,reactions:null,rv:0,v:Ct,wv:0,parent:r??Ve,ac:null}}function Ei(t,n){let r=Ve;r===null&&Xs();var a=r.b,o=void 0,i=Vn(Ct),l=!je,f=new Map;return Ri(()=>{var u=Ga();o=u.promise;try{Promise.resolve(t()).then(u.resolve,u.reject).then(()=>{c===vt&&c.committed&&c.deactivate(),Dr()})}catch(p){u.reject(p),Dr()}var c=vt;if(l){var h=!a.is_pending();a.update_pending_count(1),c.increment(h),f.get(c)?.reject(sr),f.delete(c),f.set(c,u)}const v=(p,m=void 0)=>{if(c.activate(),m)m!==sr&&(i.f|=Ln,fr(i,m));else{(i.f&Ln)!==0&&(i.f^=Ln),fr(i,p);for(const[x,R]of f){if(f.delete(x),x===c)break;R.reject(sr)}}l&&(a.update_pending_count(-1),c.decrement(h))};u.promise.then(v,p=>v(null,p||"unknown"))}),Kr(()=>{for(const u of f.values())u.reject(sr)}),new Promise(u=>{function c(h){function v(){h===o?u(i):c(o)}h.then(v,v)}c(o)})}function Jt(t){const n=Xr(t);return n.equals=Za,n}function ts(t){var n=t.effects;if(n!==null){t.effects=null;for(var r=0;r<n.length;r+=1)qt(n[r])}}function $i(t){for(var n=t.parent;n!==null;){if((n.f&Et)===0)return(n.f&yn)===0?n:null;n=n.parent}return null}function ya(t){var n,r=Ve;un($i(t));try{t.f&=~Yn,ts(t),n=ys(t)}finally{un(r)}return n}function ns(t){var n=ya(t);if(t.equals(n)||(vt?.is_fork||(t.v=n),t.wv=_s()),!Zn)if(Xt!==null)(Cr()||vt?.is_fork)&&Xt.set(t,n);else{var r=(t.f&Qt)===0?en:It;zt(t,r)}}let ia=new Set;const An=new Map;let rs=!1;function Vn(t,n){var r={f:0,v:t,reactions:null,equals:Xa,rv:0,wv:0};return r}function En(t,n){const r=Vn(t);return qi(r),r}function _(t,n=!1,r=!0){const a=Vn(t);return n||(a.equals=Za),mr&&r&&ot!==null&&ot.l!==null&&(ot.l.s??=[]).push(a),a}function oa(t,n){return s(t,w(()=>e(t))),n}function s(t,n,r=!1){je!==null&&(!ln||(je.f&$a)!==0)&&Ar()&&(je.f&(Et|kn|ma|$a))!==0&&!xn?.includes(t)&&ri();let a=r?or(n):n;return fr(t,a)}function fr(t,n){if(!t.equals(n)){var r=t.v;Zn?An.set(t,n):An.set(t,r),t.v=n;var a=on.ensure();a.capture(t,r),(t.f&Et)!==0&&((t.f&Dt)!==0&&ya(t),zt(t,(t.f&Qt)!==0?It:en)),t.wv=_s(),as(t,Dt),Ar()&&Ve!==null&&(Ve.f&It)!==0&&(Ve.f&(Tn|Kn))===0&&(Ut===null?Di([t]):Ut.push(t)),!a.is_fork&&ia.size>0&&!rs&&Mi()}return n}function Mi(){rs=!1;var t=Bn;Br(!0);const n=Array.from(ia);try{for(const r of n)(r.f&It)!==0&&zt(r,en),br(r)&&gr(r)}finally{Br(t)}ia.clear()}function Mr(t,n=1){var r=e(t),a=n===1?r++:r--;return s(t,r),a}function $r(t){s(t,t.v+1)}function as(t,n){var r=t.reactions;if(r!==null)for(var a=Ar(),o=r.length,i=0;i<o;i++){var l=r[i],f=l.f;if(!(!a&&l===Ve)){var u=(f&Dt)===0;if(u&&zt(l,n),(f&Et)!==0){var c=l;Xt?.delete(c),(f&Yn)===0&&(f&Qt&&(l.f|=Yn),as(c,en))}else u&&((f&kn)!==0&&mn!==null&&mn.add(l),Un(l))}}}function or(t){if(typeof t!="object"||t===null||qn in t)return t;const n=ga(t);if(n!==Hs&&n!==Gs)return t;var r=new Map,a=Wr(t),o=En(0),i=Hn,l=f=>{if(Hn===i)return f();var u=je,c=Hn;Nt(null),La(i);var h=f();return Nt(u),La(c),h};return a&&r.set("length",En(t.length)),new Proxy(t,{defineProperty(f,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&ti();var h=r.get(u);return h===void 0?h=l(()=>{var v=En(c.value);return r.set(u,v),v}):s(h,c.value,!0),!0},deleteProperty(f,u){var c=r.get(u);if(c===void 0){if(u in f){const h=l(()=>En(Ct));r.set(u,h),$r(o)}}else s(c,Ct),$r(o);return!0},get(f,u,c){if(u===qn)return t;var h=r.get(u),v=u in f;if(h===void 0&&(!v||Nn(f,u)?.writable)&&(h=l(()=>{var m=or(v?f[u]:Ct),x=En(m);return x}),r.set(u,h)),h!==void 0){var p=e(h);return p===Ct?void 0:p}return Reflect.get(f,u,c)},getOwnPropertyDescriptor(f,u){var c=Reflect.getOwnPropertyDescriptor(f,u);if(c&&"value"in c){var h=r.get(u);h&&(c.value=e(h))}else if(c===void 0){var v=r.get(u),p=v?.v;if(v!==void 0&&p!==Ct)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return c},has(f,u){if(u===qn)return!0;var c=r.get(u),h=c!==void 0&&c.v!==Ct||Reflect.has(f,u);if(c!==void 0||Ve!==null&&(!h||Nn(f,u)?.writable)){c===void 0&&(c=l(()=>{var p=h?or(f[u]):Ct,m=En(p);return m}),r.set(u,c));var v=e(c);if(v===Ct)return!1}return h},set(f,u,c,h){var v=r.get(u),p=u in f;if(a&&u==="length")for(var m=c;m<v.v;m+=1){var x=r.get(m+"");x!==void 0?s(x,Ct):m in f&&(x=l(()=>En(Ct)),r.set(m+"",x))}if(v===void 0)(!p||Nn(f,u)?.writable)&&(v=l(()=>En(void 0)),s(v,or(c)),r.set(u,v));else{p=v.v!==Ct;var R=l(()=>or(c));s(v,R)}var T=Reflect.getOwnPropertyDescriptor(f,u);if(T?.set&&T.set.call(h,c),!p){if(a&&typeof u=="string"){var $=r.get("length"),F=Number(u);Number.isInteger(F)&&F>=$.v&&s($,F+1)}$r(o)}return!0},ownKeys(f){e(o);var u=Reflect.ownKeys(f).filter(v=>{var p=r.get(v);return p===void 0||p.v!==Ct});for(var[c,h]of r)h.v!==Ct&&!(c in f)&&u.push(c);return u},setPrototypeOf(){ni()}})}var lr,ss,is,os;function Ci(){if(lr===void 0){lr=window,ss=/Firefox/.test(navigator.userAgent);var t=Element.prototype,n=Node.prototype,r=Text.prototype;is=Nn(n,"firstChild").get,os=Nn(n,"nextSibling").get,Ea(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Ea(r)&&(r.__t=void 0)}}function wn(t=""){return document.createTextNode(t)}function _n(t){return is.call(t)}function Or(t){return os.call(t)}function d(t,n){return _n(t)}function oe(t,n=!1){{var r=_n(t);return r instanceof Comment&&r.data===""?Or(r):r}}function b(t,n=1,r=!1){let a=t;for(;n--;)a=Or(a);return a}function Li(t){t.textContent=""}function ls(){return!1}function wa(t){var n=je,r=Ve;Nt(null),un(null);try{return t()}finally{Nt(n),un(r)}}function cs(t){Ve===null&&(je===null&&Js(),Zs()),Zn&&Ks()}function Ai(t,n){var r=n.last;r===null?n.last=n.first=t:(r.next=t,t.prev=r,n.last=t)}function vn(t,n,r){var a=Ve;a!==null&&(a.f&Wt)!==0&&(t|=Wt);var o={ctx:ot,deps:null,nodes:null,f:t|Dt|Qt,first:null,fn:n,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{gr(o),o.f|=ha}catch(f){throw qt(o),f}else n!==null&&Un(o);var i=o;if(r&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&hr)===0&&(i=i.first,(t&kn)!==0&&(t&Wn)!==0&&i!==null&&(i.f|=Wn)),i!==null&&(i.parent=a,a!==null&&Ai(i,a),je!==null&&(je.f&Et)!==0&&(t&Kn)===0)){var l=je;(l.effects??=[]).push(i)}return o}function Cr(){return je!==null&&!ln}function Kr(t){const n=vn(Ur,null,!1);return zt(n,It),n.teardown=t,n}function la(t){cs();var n=Ve.f,r=!je&&(n&Tn)!==0&&(n&ha)===0;if(r){var a=ot;(a.e??=[]).push(t)}else return us(t)}function us(t){return vn(pa|Ya,t,!1)}function Oi(t){return cs(),vn(Ur|Ya,t,!0)}function Pi(t){on.ensure();const n=vn(Kn|hr,t,!0);return(r={})=>new Promise(a=>{r.outro?Dn(n,()=>{qt(n),a(void 0)}):(qt(n),a(void 0))})}function ji(t){return vn(pa,t,!1)}function ie(t,n){var r=ot,a={effect:null,ran:!1,deps:t};r.l.$.push(a),a.effect=Zr(()=>{t(),!a.ran&&(a.ran=!0,w(n))})}function dn(){var t=ot;Zr(()=>{for(var n of t.l.$){n.deps();var r=n.effect;(r.f&It)!==0&&zt(r,en),br(r)&&gr(r),n.ran=!1}})}function Ri(t){return vn(ma|hr,t,!0)}function Zr(t,n=0){return vn(Ur|n,t,!0)}function L(t,n=[],r=[],a=[]){Ii(a,n,r,o=>{vn(Ur,()=>t(...o.map(e)),!0)})}function Jr(t,n=0){var r=vn(kn|n,t,!0);return r}function Vt(t){return vn(Tn|hr,t,!0)}function vs(t){var n=t.teardown;if(n!==null){const r=Zn,a=je;Ca(!0),Nt(null);try{n.call(null)}finally{Ca(r),Nt(a)}}}function ds(t,n=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const o=r.ac;o!==null&&wa(()=>{o.abort(sr)});var a=r.next;(r.f&Kn)!==0?r.parent=null:qt(r,n),r=a}}function Fi(t){for(var n=t.first;n!==null;){var r=n.next;(n.f&Tn)===0&&qt(n),n=r}}function qt(t,n=!0){var r=!1;(n||(t.f&Wa)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Ni(t.nodes.start,t.nodes.end),r=!0),ds(t,n&&!r),Hr(t,0),zt(t,yn);var a=t.nodes&&t.nodes.t;if(a!==null)for(const i of a)i.stop();vs(t);var o=t.parent;o!==null&&o.first!==null&&fs(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Ni(t,n){for(;t!==null;){var r=t===n?null:Or(t);t.remove(),t=r}}function fs(t){var n=t.parent,r=t.prev,a=t.next;r!==null&&(r.next=a),a!==null&&(a.prev=r),n!==null&&(n.first===t&&(n.first=a),n.last===t&&(n.last=r))}function Dn(t,n,r=!0){var a=[];gs(t,a,!0);var o=()=>{r&&qt(t),n&&n()},i=a.length;if(i>0){var l=()=>--i||o();for(var f of a)f.out(l)}else o()}function gs(t,n,r){if((t.f&Wt)===0){t.f^=Wt;var a=t.nodes&&t.nodes.t;if(a!==null)for(const f of a)(f.is_global||r)&&n.push(f);for(var o=t.first;o!==null;){var i=o.next,l=(o.f&Wn)!==0||(o.f&Tn)!==0&&(t.f&kn)!==0;gs(o,n,l?r:!1),o=i}}}function xa(t){ps(t,!0)}function ps(t,n){if((t.f&Wt)!==0){t.f^=Wt,(t.f&It)===0&&(zt(t,Dt),Un(t));for(var r=t.first;r!==null;){var a=r.next,o=(r.f&Wn)!==0||(r.f&Tn)!==0;ps(r,o?n:!1),r=a}var i=t.nodes&&t.nodes.t;if(i!==null)for(const l of i)(l.is_global||n)&&l.in()}}function hs(t,n){if(t.nodes)for(var r=t.nodes.start,a=t.nodes.end;r!==null;){var o=r===a?null:Or(r);n.append(r),r=o}}let Bn=!1;function Br(t){Bn=t}let Zn=!1;function Ca(t){Zn=t}let je=null,ln=!1;function Nt(t){je=t}let Ve=null;function un(t){Ve=t}let xn=null;function qi(t){je!==null&&(xn===null?xn=[t]:xn.push(t))}let jt=null,Gt=0,Ut=null;function Di(t){Ut=t}let ms=1,Lr=0,Hn=Lr;function La(t){Hn=t}function _s(){return++ms}function br(t){var n=t.f;if((n&Dt)!==0)return!0;if(n&Et&&(t.f&=~Yn),(n&en)!==0){var r=t.deps;if(r!==null)for(var a=r.length,o=0;o<a;o++){var i=r[o];if(br(i)&&ns(i),i.wv>t.wv)return!0}(n&Qt)!==0&&Xt===null&&zt(t,It)}return!1}function bs(t,n,r=!0){var a=t.reactions;if(a!==null&&!xn?.includes(t))for(var o=0;o<a.length;o++){var i=a[o];(i.f&Et)!==0?bs(i,n,!1):n===i&&(r?zt(i,Dt):(i.f&It)!==0&&zt(i,en),Un(i))}}function ys(t){var n=jt,r=Gt,a=Ut,o=je,i=xn,l=ot,f=ln,u=Hn,c=t.f;jt=null,Gt=0,Ut=null,je=(c&(Tn|Kn))===0?t:null,xn=null,vr(t.ctx),ln=!1,Hn=++Lr,t.ac!==null&&(wa(()=>{t.ac.abort(sr)}),t.ac=null);try{t.f|=aa;var h=t.fn,v=h(),p=t.deps;if(jt!==null){var m;if(Hr(t,Gt),p!==null&&Gt>0)for(p.length=Gt+jt.length,m=0;m<jt.length;m++)p[Gt+m]=jt[m];else t.deps=p=jt;if(Cr()&&(t.f&Qt)!==0)for(m=Gt;m<p.length;m++)(p[m].reactions??=[]).push(t)}else p!==null&&Gt<p.length&&(Hr(t,Gt),p.length=Gt);if(Ar()&&Ut!==null&&!ln&&p!==null&&(t.f&(Et|en|Dt))===0)for(m=0;m<Ut.length;m++)bs(Ut[m],t);return o!==null&&o!==t&&(Lr++,Ut!==null&&(a===null?a=Ut:a.push(...Ut))),(t.f&Ln)!==0&&(t.f^=Ln),v}catch(x){return Ja(x)}finally{t.f^=aa,jt=n,Gt=r,Ut=a,je=o,xn=i,vr(l),ln=f,Hn=u}}function Bi(t,n){let r=n.reactions;if(r!==null){var a=Bs.call(r,t);if(a!==-1){var o=r.length-1;o===0?r=n.reactions=null:(r[a]=r[o],r.pop())}}r===null&&(n.f&Et)!==0&&(jt===null||!jt.includes(n))&&(zt(n,en),(n.f&Qt)!==0&&(n.f^=Qt,n.f&=~Yn),ts(n),Hr(n,0))}function Hr(t,n){var r=t.deps;if(r!==null)for(var a=n;a<r.length;a++)Bi(t,r[a])}function gr(t){var n=t.f;if((n&yn)===0){zt(t,It);var r=Ve,a=Bn;Ve=t,Bn=!0;try{(n&(kn|Ys))!==0?Fi(t):ds(t),vs(t);var o=ys(t);t.teardown=typeof o=="function"?o:null,t.wv=ms;var i;na&&mi&&(t.f&Dt)!==0&&t.deps}finally{Bn=a,Ve=r}}}function e(t){var n=t.f,r=(n&Et)!==0;if(je!==null&&!ln){var a=Ve!==null&&(Ve.f&yn)!==0;if(!a&&!xn?.includes(t)){var o=je.deps;if((je.f&aa)!==0)t.rv<Lr&&(t.rv=Lr,jt===null&&o!==null&&o[Gt]===t?Gt++:jt===null?jt=[t]:jt.includes(t)||jt.push(t));else{(je.deps??=[]).push(t);var i=t.reactions;i===null?t.reactions=[je]:i.includes(je)||i.push(je)}}}if(Zn){if(An.has(t))return An.get(t);if(r){var l=t,f=l.v;return((l.f&It)===0&&l.reactions!==null||xs(l))&&(f=ya(l)),An.set(l,f),f}}else r&&(!Xt?.has(t)||vt?.is_fork&&!Cr())&&(l=t,br(l)&&ns(l),Bn&&Cr()&&(l.f&Qt)===0&&ws(l));if(Xt?.has(t))return Xt.get(t);if((t.f&Ln)!==0)throw t.v;return t.v}function ws(t){if(t.deps!==null){t.f^=Qt;for(const n of t.deps)(n.reactions??=[]).push(t),(n.f&Et)!==0&&(n.f&Qt)===0&&ws(n)}}function xs(t){if(t.v===Ct)return!0;if(t.deps===null)return!1;for(const n of t.deps)if(An.has(n)||(n.f&Et)!==0&&xs(n))return!0;return!1}function w(t){var n=ln;try{return ln=!0,t()}finally{ln=n}}const Hi=-7169;function zt(t,n){t.f=t.f&Hi|n}function dt(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(qn in t)ca(t);else if(!Array.isArray(t))for(let n in t){const r=t[n];typeof r=="object"&&r&&qn in r&&ca(r)}}}function ca(t,n=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!n.has(t)){n.add(t),t instanceof Date&&t.getTime();for(let a in t)try{ca(t[a],n)}catch{}const r=ga(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const a=Ha(r);for(let o in a){const i=a[o].get;if(i)try{i.call(t)}catch{}}}}}const Gi=["touchstart","touchmove"];function Wi(t){return Gi.includes(t)}const Yi=new Set,Aa=new Set;function Ui(t,n,r,a={}){function o(i){if(a.capture||zr.call(n,i),!i.cancelBubble)return wa(()=>r?.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?_r(()=>{n.addEventListener(t,o,a)}):n.addEventListener(t,o,a),o}function E(t,n,r,a,o){var i={capture:a,passive:o},l=Ui(t,n,r,i);(n===document.body||n===window||n===document||n instanceof HTMLMediaElement)&&Kr(()=>{n.removeEventListener(t,l,i)})}let Oa=null;function zr(t){var n=this,r=n.ownerDocument,a=t.type,o=t.composedPath?.()||[],i=o[0]||t.target;Oa=t;var l=0,f=Oa===t&&t.__root;if(f){var u=o.indexOf(f);if(u!==-1&&(n===document||n===window)){t.__root=n;return}var c=o.indexOf(n);if(c===-1)return;u<=c&&(l=u)}if(i=o[l]||t.target,i!==n){Ba(t,"currentTarget",{configurable:!0,get(){return i||r}});var h=je,v=Ve;Nt(null),un(null);try{for(var p,m=[];i!==null;){var x=i.assignedSlot||i.parentNode||i.host||null;try{var R=i["__"+a];R!=null&&(!i.disabled||t.target===i)&&R.call(i,t)}catch(T){p?m.push(T):p=T}if(t.cancelBubble||x===n||x===null)break;i=x}if(p){for(let T of m)queueMicrotask(()=>{throw T});throw p}}finally{t.__root=n,delete t.currentTarget,Nt(h),un(v)}}}function ks(t){var n=document.createElement("template");return n.innerHTML=t.replaceAll("<!>","<!---->"),n.content}function pr(t,n){var r=Ve;r.nodes===null&&(r.nodes={start:t,end:n,a:null,t:null})}function y(t,n){var r=(n&Va)!==0,a=(n&gi)!==0,o,i=!t.startsWith("<!>");return()=>{o===void 0&&(o=ks(i?t:"<!>"+t),r||(o=_n(o)));var l=a||ss?document.importNode(o,!0):o.cloneNode(!0);if(r){var f=_n(l),u=l.lastChild;pr(f,u)}else pr(l,l);return l}}function Vi(t,n,r="svg"){var a=!t.startsWith("<!>"),o=(n&Va)!==0,i=`<${r}>${a?t:"<!>"+t}</${r}>`,l;return()=>{if(!l){var f=ks(i),u=_n(f);if(o)for(l=document.createDocumentFragment();_n(u);)l.appendChild(_n(u));else l=_n(u)}var c=l.cloneNode(!0);if(o){var h=_n(c),v=c.lastChild;pr(h,v)}else pr(c,c);return c}}function yr(t,n){return Vi(t,n,"svg")}function Xi(t=""){{var n=wn(t+"");return pr(n,n),n}}function Ie(){var t=document.createDocumentFragment(),n=document.createComment(""),r=wn();return t.append(n,r),pr(n,r),t}function g(t,n){t!==null&&t.before(n)}function Z(t,n){var r=n==null?"":typeof n=="object"?n+"":n;r!==(t.__t??=t.nodeValue)&&(t.__t=r,t.nodeValue=r+"")}function Ki(t,n){return Zi(t,n)}const rr=new Map;function Zi(t,{target:n,anchor:r,props:a={},events:o,context:i,intro:l=!0}){Ci();var f=new Set,u=v=>{for(var p=0;p<v.length;p++){var m=v[p];if(!f.has(m)){f.add(m);var x=Wi(m);n.addEventListener(m,zr,{passive:x});var R=rr.get(m);R===void 0?(document.addEventListener(m,zr,{passive:x}),rr.set(m,1)):rr.set(m,R+1)}}};u(Yr(Yi)),Aa.add(u);var c=void 0,h=Pi(()=>{var v=r??n.appendChild(wn());return Ti(v,{pending:()=>{}},p=>{if(i){$t({});var m=ot;m.c=i}o&&(a.$$events=o),c=t(p,a)||{},i&&Mt()}),()=>{for(var p of f){n.removeEventListener(p,zr);var m=rr.get(p);--m===0?(document.removeEventListener(p,zr),rr.delete(p)):rr.set(p,m)}Aa.delete(u),v!==r&&v.parentNode?.removeChild(v)}});return Ji.set(c,h),c}let Ji=new WeakMap;class Ts{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(n,r=!0){this.anchor=n,this.#l=r}#s=()=>{var n=vt;if(this.#e.has(n)){var r=this.#e.get(n),a=this.#t.get(r);if(a)xa(a),this.#n.delete(r);else{var o=this.#r.get(r);o&&(this.#t.set(r,o.effect),this.#r.delete(r),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),a=o.effect)}for(const[i,l]of this.#e){if(this.#e.delete(i),i===n)break;const f=this.#r.get(l);f&&(qt(f.effect),this.#r.delete(l))}for(const[i,l]of this.#t){if(i===r||this.#n.has(i))continue;const f=()=>{if(Array.from(this.#e.values()).includes(i)){var c=document.createDocumentFragment();hs(l,c),c.append(wn()),this.#r.set(i,{effect:l,fragment:c})}else qt(l);this.#n.delete(i),this.#t.delete(i)};this.#l||!a?(this.#n.add(i),Dn(l,f,!1)):f()}}};#a=n=>{this.#e.delete(n);const r=Array.from(this.#e.values());for(const[a,o]of this.#r)r.includes(a)||(qt(o.effect),this.#r.delete(a))};ensure(n,r){var a=vt,o=ls();if(r&&!this.#t.has(n)&&!this.#r.has(n))if(o){var i=document.createDocumentFragment(),l=wn();i.append(l),this.#r.set(n,{effect:Vt(()=>r(l)),fragment:i})}else this.#t.set(n,Vt(()=>r(this.anchor)));if(this.#e.set(a,n),o){for(const[f,u]of this.#t)f===n?a.skipped_effects.delete(u):a.skipped_effects.add(u);for(const[f,u]of this.#r)f===n?a.skipped_effects.delete(u.effect):a.skipped_effects.add(u.effect);a.oncommit(this.#s),a.ondiscard(this.#a)}else this.#s()}}function I(t,n,r=!1){var a=new Ts(t),o=r?Wn:0;function i(l,f){a.ensure(l,f)}Jr(()=>{var l=!1;n((f,u=!0)=>{l=!0,i(u,f)}),l||i(!1,null)},o)}function xt(t,n){return n}function Qi(t,n,r){for(var a=[],o=n.length,i,l=n.length,f=0;f<o;f++){let v=n[f];Dn(v,()=>{if(i){if(i.pending.delete(v),i.done.add(v),i.pending.size===0){var p=t.outrogroups;ua(Yr(i.done)),p.delete(i),p.size===0&&(t.outrogroups=null)}}else l-=1},!1)}if(l===0){var u=a.length===0&&r!==null;if(u){var c=r,h=c.parentNode;Li(h),h.append(c),t.items.clear()}ua(n,!u)}else i={pending:new Set(n),done:new Set},(t.outrogroups??=new Set).add(i)}function ua(t,n=!0){for(var r=0;r<t.length;r++)qt(t[r],n)}var Pa;function it(t,n,r,a,o,i=null){var l=t,f=new Map,u=(n&Ua)!==0;if(u){var c=t;l=c.appendChild(wn())}var h=null,v=Jt(()=>{var $=r();return Wr($)?$:$==null?[]:Yr($)}),p,m=!0;function x(){T.fallback=h,eo(T,p,l,n,a),h!==null&&(p.length===0?(h.f&bn)===0?xa(h):(h.f^=bn,Er(h,null,l)):Dn(h,()=>{h=null}))}var R=Jr(()=>{p=e(v);for(var $=p.length,F=new Set,O=vt,X=ls(),H=0;H<$;H+=1){var Q=p[H],B=a(Q,H),U=m?null:f.get(B);U?(U.v&&fr(U.v,Q),U.i&&fr(U.i,H),X&&O.skipped_effects.delete(U.e)):(U=to(f,m?l:Pa??=wn(),Q,B,H,o,n,r),m||(U.e.f|=bn),f.set(B,U)),F.add(B)}if($===0&&i&&!h&&(m?h=Vt(()=>i(l)):(h=Vt(()=>i(Pa??=wn())),h.f|=bn)),!m)if(X){for(const[K,le]of f)F.has(K)||O.skipped_effects.add(le.e);O.oncommit(x),O.ondiscard(()=>{})}else x();e(v)}),T={effect:R,items:f,outrogroups:null,fallback:h};m=!1}function eo(t,n,r,a,o){var i=(a&oi)!==0,l=n.length,f=t.items,u=t.effect.first,c,h=null,v,p=[],m=[],x,R,T,$;if(i)for($=0;$<l;$+=1)x=n[$],R=o(x,$),T=f.get(R).e,(T.f&bn)===0&&(T.nodes?.a?.measure(),(v??=new Set).add(T));for($=0;$<l;$+=1){if(x=n[$],R=o(x,$),T=f.get(R).e,t.outrogroups!==null)for(const le of t.outrogroups)le.pending.delete(T),le.done.delete(T);if((T.f&bn)!==0)if(T.f^=bn,T===u)Er(T,null,r);else{var F=h?h.next:u;T===t.effect.last&&(t.effect.last=T.prev),T.prev&&(T.prev.next=T.next),T.next&&(T.next.prev=T.prev),$n(t,h,T),$n(t,T,F),Er(T,F,r),h=T,p=[],m=[],u=h.next;continue}if((T.f&Wt)!==0&&(xa(T),i&&(T.nodes?.a?.unfix(),(v??=new Set).delete(T))),T!==u){if(c!==void 0&&c.has(T)){if(p.length<m.length){var O=m[0],X;h=O.prev;var H=p[0],Q=p[p.length-1];for(X=0;X<p.length;X+=1)Er(p[X],O,r);for(X=0;X<m.length;X+=1)c.delete(m[X]);$n(t,H.prev,Q.next),$n(t,h,H),$n(t,Q,O),u=O,h=Q,$-=1,p=[],m=[]}else c.delete(T),Er(T,u,r),$n(t,T.prev,T.next),$n(t,T,h===null?t.effect.first:h.next),$n(t,h,T),h=T;continue}for(p=[],m=[];u!==null&&u!==T;)(c??=new Set).add(u),m.push(u),u=u.next;if(u===null)continue}(T.f&bn)===0&&p.push(T),h=T,u=T.next}if(t.outrogroups!==null){for(const le of t.outrogroups)le.pending.size===0&&(ua(Yr(le.done)),t.outrogroups?.delete(le));t.outrogroups.size===0&&(t.outrogroups=null)}if(u!==null||c!==void 0){var B=[];if(c!==void 0)for(T of c)(T.f&Wt)===0&&B.push(T);for(;u!==null;)(u.f&Wt)===0&&u!==t.fallback&&B.push(u),u=u.next;var U=B.length;if(U>0){var K=(a&Ua)!==0&&l===0?r:null;if(i){for($=0;$<U;$+=1)B[$].nodes?.a?.measure();for($=0;$<U;$+=1)B[$].nodes?.a?.fix()}Qi(t,B,K)}}i&&_r(()=>{if(v!==void 0)for(T of v)T.nodes?.a?.apply()})}function to(t,n,r,a,o,i,l,f){var u=(l&si)!==0?(l&li)===0?_(r,!1,!1):Vn(r):null,c=(l&ii)!==0?Vn(o):null;return{v:u,i:c,e:Vt(()=>(i(n,u??r,c??o,f),()=>{t.delete(a)}))}}function Er(t,n,r){if(t.nodes)for(var a=t.nodes.start,o=t.nodes.end,i=n&&(n.f&bn)===0?n.nodes.start:r;a!==null;){var l=Or(a);if(i.before(a),a===o)return;a=l}}function $n(t,n,r){n===null?t.effect.first=r:n.next=r,r===null?t.effect.last=n:r.prev=n}function no(t,n,r,a,o){var i=n.$$slots?.[r],l=!1;i===!0&&(i=n.children,l=!0),i===void 0||i(t,l?()=>a:a)}function ro(t,n,r){var a=new Ts(t);Jr(()=>{var o=n()??null;a.ensure(o,o&&(i=>r(i,o)))},Wn)}const ja=[...` 	
\r\fÂ \v\uFEFF`];function ao(t,n,r){var a=t==null?"":""+t;if(n&&(a=a?a+" "+n:n),r){for(var o in r)if(r[o])a=a?a+" "+o:o;else if(a.length)for(var i=o.length,l=0;(l=a.indexOf(o,l))>=0;){var f=l+i;(l===0||ja.includes(a[l-1]))&&(f===a.length||ja.includes(a[f]))?a=(l===0?"":a.substring(0,l))+a.substring(f+1):l=f}}return a===""?null:a}function so(t,n){return t==null?null:String(t)}function Gn(t,n,r,a,o,i){var l=t.__className;if(l!==r||l===void 0){var f=ao(r,a,i);f==null?t.removeAttribute("class"):t.className=f,t.__className=r}else if(i&&o!==i)for(var u in i){var c=!!i[u];(o==null||c!==!!o[u])&&t.classList.toggle(u,c)}return i}function St(t,n,r,a){var o=t.__style;if(o!==n){var i=so(n);i==null?t.removeAttribute("style"):t.style.cssText=i,t.__style=n}return a}const io=Symbol("is custom element"),oo=Symbol("is html");function D(t,n,r,a){var o=lo(t);o[n]!==(o[n]=r)&&(n==="loading"&&(t[Vs]=r),r==null?t.removeAttribute(n):typeof r!="string"&&co(t).includes(n)?t[n]=r:t.setAttribute(n,r))}function lo(t){return t.__attributes??={[io]:t.nodeName.includes("-"),[oo]:t.namespaceURI===pi}}var Ra=new Map;function co(t){var n=t.getAttribute("is")||t.nodeName,r=Ra.get(n);if(r)return r;Ra.set(n,r=[]);for(var a,o=t,i=Element.prototype;i!==o;){a=Ha(o);for(var l in a)a[l].set&&r.push(l);o=ga(o)}return r}function uo(t,n,r){var a=Nn(t,n);a&&a.set&&(t[n]=r,Kr(()=>{t[n]=null}))}function Fa(t,n){return t===n||t?.[qn]===n}function Xn(t={},n,r,a){return ji(()=>{var o,i;return Zr(()=>{o=i,i=[],w(()=>{t!==r(...i)&&(n(t,...i),o&&Fa(r(...o),t)&&n(null,...o))})}),()=>{_r(()=>{i&&Fa(r(...i),t)&&n(null,...i)})}}),t}function ka(t){return function(...n){var r=n[0];return r.stopPropagation(),t?.apply(this,n)}}function Rt(t=!1){const n=ot,r=n.l.u;if(!r)return;let a=()=>dt(n.s);if(t){let o=0,i={};const l=Xr(()=>{let f=!1;const u=n.s;for(const c in u)u[c]!==i[c]&&(i[c]=u[c],f=!0);return f&&o++,o});a=()=>e(l)}r.b.length&&Oi(()=>{Na(n,a),ra(r.b)}),la(()=>{const o=w(()=>r.m.map(Ws));return()=>{for(const i of o)typeof i=="function"&&i()}}),r.a.length&&la(()=>{Na(n,a),ra(r.a)})}function Na(t,n){if(t.l.s)for(const r of t.l.s)e(r);n()}function Ss(t,n){var r=t.$$events?.[n.type],a=Wr(r)?r.slice():r==null?[]:[r];for(var o of a)o.call(this,n)}function Is(t,n,r){if(t==null)return n(void 0),cr;const a=w(()=>t.subscribe(n,r));return a.unsubscribe?()=>a.unsubscribe():a}const ar=[];function Sn(t,n=cr){let r=null;const a=new Set;function o(f){if(Ka(t,f)&&(t=f,r)){const u=!ar.length;for(const c of a)c[1](),ar.push(c,t);if(u){for(let c=0;c<ar.length;c+=2)ar[c][0](ar[c+1]);ar.length=0}}}function i(f){o(f(t))}function l(f,u=cr){const c=[f,u];return a.add(c),a.size===1&&(r=n(o,i)||cr),f(t),()=>{a.delete(c),a.size===0&&r&&(r(),r=null)}}return{set:o,update:i,subscribe:l}}function vo(t){let n;return Is(t,r=>n=r)(),n}let Fr=!1,va=Symbol();function wt(t,n,r){const a=r[n]??={store:null,source:_(void 0),unsubscribe:cr};if(a.store!==t&&!(va in r))if(a.unsubscribe(),a.store=t??null,t==null)a.source.v=void 0,a.unsubscribe=cr;else{var o=!0;a.unsubscribe=Is(t,i=>{o?a.source.v=i:s(a.source,i)}),o=!1}return t&&va in r?vo(t):e(a.source)}function In(){const t={};function n(){Kr(()=>{for(var r in t)t[r].unsubscribe();Ba(t,va,{enumerable:!1,value:!0})})}return[t,n]}function fo(t){var n=Fr;try{return Fr=!1,[t(),Fr]}finally{Fr=n}}function Yt(t,n,r,a){var o=!mr||(r&ui)!==0,i=(r&di)!==0,l=(r&fi)!==0,f=a,u=!0,c=()=>(u&&(u=!1,f=l?w(a):a),f),h;if(i){var v=qn in t||Us in t;h=Nn(t,n)?.set??(v&&n in t?O=>t[n]=O:void 0)}var p,m=!1;i?[p,m]=fo(()=>t[n]):p=t[n],p===void 0&&a!==void 0&&(p=c(),h&&(o&&ei(),h(p)));var x;if(o?x=()=>{var O=t[n];return O===void 0?c():(u=!0,O)}:x=()=>{var O=t[n];return O!==void 0&&(f=void 0),O===void 0?f:O},o&&(r&vi)===0)return x;if(h){var R=t.$$legacy;return(function(O,X){return arguments.length>0?((!o||!X||R||m)&&h(X?x():O),O):x()})}var T=!1,$=((r&ci)!==0?Xr:Jt)(()=>(T=!1,x()));i&&e($);var F=Ve;return(function(O,X){if(arguments.length>0){const H=X?e($):o&&i?or(O):O;return s($,H),T=!0,f!==void 0&&(f=H),O}return Zn&&T||(F.f&yn)!==0?$.v:e($)})}function fn(t){ot===null&&_a(),mr&&ot.l!==null?po(ot).m.push(t):la(()=>{const n=w(t);if(typeof n=="function")return n})}function On(t){ot===null&&_a(),fn(()=>()=>w(t))}function go(t,n,{bubbles:r=!1,cancelable:a=!1}={}){return new CustomEvent(t,{detail:n,bubbles:r,cancelable:a})}function gn(){const t=ot;return t===null&&_a(),(n,r,a)=>{const o=t.s.$$events?.[n];if(o){const i=Wr(o)?o.slice():[o],l=go(n,r,a);for(const f of i)f.call(t.x,l);return!l.defaultPrevented}return!0}}function po(t){var n=t.l;return n.u??={a:[],b:[],m:[]}}const ho="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(ho);_i();var mo=y('<div class="overlay svelte-xv5z84"><div class="message svelte-xv5z84"><h1 class="svelte-xv5z84">ðŸ”„</h1> <p class="svelte-xv5z84">Please rotate your device horizontally</p></div></div>');function _o(t,n){$t(n,!1);let r=_(!1);function a(){s(r,window.innerHeight>window.innerWidth)}fn(()=>{a(),window.addEventListener("resize",a)}),On(()=>{window.removeEventListener("resize",a)}),Rt();var o=Ie(),i=oe(o);{var l=f=>{var u=mo();g(f,u)};I(i,f=>{e(r)&&f(l)})}g(t,o),Mt()}var bo=y('<img class="img svelte-1gaeztd" alt="" draggable="false"/>'),yo=y('<p class="svelte-1gaeztd"> </p>'),wo=y('<button class="btn ghost svelte-1gaeztd">Back</button>'),xo=y('<div class="wrap svelte-1gaeztd"><h1 class="title svelte-1gaeztd"> </h1> <!> <div class="text svelte-1gaeztd"></div> <div class="actions svelte-1gaeztd"><!> <button class="btn svelte-1gaeztd"> </button></div></div>');function ko(t,n){$t(n,!1);const r=_(),a=_();let o=Yt(n,"intro",8);const i=gn();let l=_(0);function f(){e(l)<e(r).length-1?s(l,e(l)+1):i("done")}function u(){e(l)>0&&s(l,e(l)-1)}ie(()=>dt(o()),()=>{s(r,o()?.slides??[])}),ie(()=>(e(r),e(l)),()=>{s(a,e(r)[e(l)])}),dn(),Rt();var c=xo(),h=d(c),v=d(h),p=b(h,2);{var m=X=>{var H=bo();L(()=>D(H,"src",(e(a),w(()=>e(a).image)))),g(X,H)};I(p,X=>{e(a),w(()=>e(a)?.image)&&X(m)})}var x=b(p,2);it(x,5,()=>(e(a),w(()=>e(a)?.lines??[])),xt,(X,H)=>{var Q=yo(),B=d(Q);L(()=>Z(B,e(H))),g(X,Q)});var R=b(x,2),T=d(R);{var $=X=>{var H=wo();E("click",H,u),g(X,H)};I(T,X=>{e(l)>0&&X($)})}var F=b(T,2),O=d(F);L(()=>{Z(v,(dt(o()),w(()=>o()?.title??"Intro"))),Z(O,(e(l),e(r),dt(o()),w(()=>e(l)<e(r).length-1?"Next":o()?.startButton??"Start")))}),E("click",F,f),g(t,c),Mt()}const zs="school_journey_timer",Es="school_journey_best_time",$s=999999;function ea(t){if(!(typeof window>"u"))try{localStorage.setItem(zs,JSON.stringify({time:t,timestamp:Date.now()}))}catch{}}function da(t){if(!(typeof window>"u"))try{const n=Ms();return n===null||n>$s||t<n?(localStorage.setItem(Es,JSON.stringify({time:t,timestamp:Date.now()})),!0):!1}catch{return!1}}function Ms(){if(typeof window>"u")return null;try{const t=localStorage.getItem(Es);if(!t)return null;const r=JSON.parse(t).time;return r>$s?null:r}catch{return null}}function fa(){if(!(typeof window>"u"))try{localStorage.removeItem(zs)}catch{}}function Nr(t){const n=Math.floor(t/60),r=Math.floor(t%60);return`${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}const Fn=Sn("menu"),Zt=Sn(0),cn=Sn(3),Gr=Sn([]),ur=Sn("pajamas"),Cs=Sn({}),Cn=Sn(0),ta=Sn(!1),qr=Sn(!1);function qa(t){return t.sort(()=>Math.random()-.5)}function Ls(t){const n=t.levels,r=n.filter(m=>m.tier===1),a=n.filter(m=>m.tier===2),o=n.filter(m=>m.tier===3),i=r.filter(m=>m.type!=="maze"),l=r.find(m=>m.type==="maze"),f=a.filter(m=>m.type!=="traffic-light"),u=a.find(m=>m.type==="traffic-light"),c=o.find(m=>m.type==="memory"),h=qa([...i]),v=qa([...f]);let p=[];return p.push(...h),l&&p.push(l),p.push(...v),u&&p.push(u),c&&p.push(c),p}var To=y('<button class="menu-button svelte-vjio3g" aria-label="Open menu">â˜°</button> <!>',1);function So(t,n){$t(n,!1);let r=Yt(n,"isOpen",12,!1);function a(){r(!r())}function o(){r(!1)}var i={closeMenu:o},l=To(),f=oe(l),u=b(f,2);{var c=h=>{var v=Ie(),p=oe(v);no(p,n,"default",{get isOpen(){return r()},closeMenu:o}),g(h,v)};I(u,h=>{r()&&h(c)})}return E("click",f,a),g(t,l),uo(n,"closeMenu",o),Mt(i)}var Io=y('<div class="menu-content svelte-1n67c00"><h2 class="svelte-1n67c00">Menu</h2> <button class="menu-item svelte-1n67c00">Restart Game</button> <button class="menu-item svelte-1n67c00">Continue Game</button> <button class="menu-item svelte-1n67c00">Show Statistics</button></div>'),zo=y('<div class="stats-content svelte-1n67c00"><h2 class="svelte-1n67c00">Statistics</h2> <div class="stats-info svelte-1n67c00"><div class="svelte-1n67c00"> </div> <div class="svelte-1n67c00"> </div></div> <button class="back-button svelte-1n67c00">Back</button></div>'),Eo=y('<div class="menu-overlay svelte-1n67c00" role="dialog" aria-modal="true" aria-label="Game menu" tabindex="-1"><div class="menu-window svelte-1n67c00"><button class="close-button svelte-1n67c00" aria-label="Close menu">Ã—</button> <!></div></div>');function $o(t,n){$t(n,!1);const r=()=>wt(Cn,"$gameTimer",a),[a,o]=In(),i=_(),l=_();let f=Yt(n,"onRestart",8,()=>{}),u=Yt(n,"onContinue",8,()=>{}),c=Yt(n,"onClose",8,()=>{}),h=_(!1),v=_(null);function p(){f()(),c()()}function m(){u()(),c()()}function x(){s(v,Ms()),s(h,!0)}function R(){s(h,!1)}ie(()=>(e(v),Nr),()=>{s(i,e(v)!==null?Nr(e(v)):"â€”")}),ie(()=>r(),()=>{s(l,Nr(r()))}),dn(),Rt();var T=Eo(),$=d(T),F=d($),O=b(F,2);{var X=Q=>{var B=Io(),U=b(d(B),2),K=b(U,2),le=b(K,2);E("click",U,p),E("click",K,m),E("click",le,x),g(Q,B)},H=Q=>{var B=zo(),U=b(d(B),2),K=d(U),le=d(K),me=b(K,2),ne=d(me),Me=b(U,2);L(()=>{Z(le,`Current Time: ${e(l)??""}`),Z(ne,`Best Time: ${e(i)??""}`)}),E("click",Me,R),g(Q,B)};I(O,Q=>{e(h)?Q(H,!1):Q(X)})}E("click",F,function(...Q){c()?.apply(this,Q)}),E("click",$,ka(function(Q){Ss.call(this,n,Q)})),E("click",T,function(...Q){c()?.apply(this,Q)}),E("keydown",T,Q=>{(Q.key==="Escape"||Q.key==="Enter"||Q.key===" ")&&c()()}),g(t,T),Mt(),o()}var Mo=y('<div class="item svelte-aq7ah7" role="button" tabindex="0"><img draggable="false" class="svelte-aq7ah7"/></div>'),Co=y('<li class="svelte-aq7ah7"> </li>'),Lo=y('<div class="message-overlay svelte-aq7ah7" role="button" tabindex="0"><div class="message-box svelte-aq7ah7"><p class="svelte-aq7ah7"> </p> <button class="svelte-aq7ah7">OK</button></div></div>'),Ao=y('<div class="level-container svelte-aq7ah7"><img class="character-standing svelte-aq7ah7" alt="Lina"/> <div class="backpack-zone svelte-aq7ah7"><img alt="Backpack" class="svelte-aq7ah7"/></div> <!> <div class="information svelte-aq7ah7"><h3 class="svelte-aq7ah7">Information</h3> <ul class="svelte-aq7ah7"></ul></div> <!></div>');function Oo(t,n){$t(n,!1);const r=()=>wt(ur,"$characterOutfit",a),[a,o]=In(),i=_(),l=_(),u=Yt(n,"data",8)()?.config??{};let c=_((u.items||[]).map(C=>({...C}))),h=u.backpack??{},v=u.background??"",p=_(),m=_(null),x=0,R=0;const T={pajamas:"./game/characters/Lina/pajamas/thinking.png",school_uniform:"./game/characters/Lina/suit/thinking.png"},$=gn();function F(C,A){C.preventDefault(),s(m,A),x=parseFloat(A.x),R=parseFloat(A.y)}function O(C){if(!e(m))return;const A=C.touches?C.touches[0].clientX:C.clientX,N=C.touches?C.touches[0].clientY:C.clientY,W=A/window.innerWidth*100,q=N/window.innerHeight*100;s(c,e(c).map(_e=>_e.id===e(m).id?{..._e,x:W,y:q}:_e))}function X(C){if(!e(p))return!1;const A=e(p).getBoundingClientRect(),N=C.x/100*window.innerWidth,W=C.y/100*window.innerHeight,q=A.left+A.width/2,_e=A.top+A.height/2;return Math.sqrt(Math.pow(N-q,2)+Math.pow(W-_e,2))<150}function H(C){if(!C)return;new Audio(C).play().catch(()=>{})}let Q=_(null);function B(){if(!e(m))return;const C=e(c).find(N=>N.id===e(m).id);X(C)&&(e(m).message?(H(u.sounds?.success),s(Q,e(m).message),s(c,e(c).filter(N=>N.id!==e(m).id))):e(m).isCorrect?(s(c,e(c).filter(N=>N.id!==e(m).id)),H(u.sounds?.drop)):(cn.update(N=>N-1),H(u.sounds?.fail),s(c,e(c).map(N=>N.id===e(m).id?{...N,x,y:R}:N)),navigator.vibrate&&navigator.vibrate(200))),s(m,null)}ie(()=>r(),()=>{s(i,T[r()]||T.pajamas)}),ie(()=>e(c),()=>{s(l,e(c).filter(C=>C.isCorrect&&!C.message).length)}),ie(()=>e(l),()=>{e(l)===0&&(H(u.sounds?.joy),setTimeout(()=>{H(u.sounds?.clap),$("complete")},1e3))}),dn(),Rt();var U=Ao();E("mousemove",lr,O),E("mouseup",lr,B),E("touchmove",lr,O),E("touchend",lr,B);var K=d(U),le=b(K,2),me=d(le);Xn(le,C=>s(p,C),()=>e(p));var ne=b(le,2);it(ne,1,()=>e(c),xt,(C,A)=>{var N=Mo(),W=d(N);L(()=>{St(N,`left: ${e(A),w(()=>e(A).x)??""}%; top: ${e(A),w(()=>e(A).y)??""}%; z-index: ${e(m),e(A),w(()=>e(m)?.id===e(A).id?100:20)??""};`),D(W,"src",(e(A),w(()=>e(A).image))),D(W,"alt",(e(A),w(()=>e(A).name)))}),E("mousedown",N,q=>F(q,e(A))),E("touchstart",N,q=>F(q,e(A))),g(C,N)});var Me=b(ne,2),Le=b(d(Me),2);it(Le,5,()=>w(()=>u.checklist?.requirements||[]),xt,(C,A)=>{var N=Co(),W=d(N);L(()=>Z(W,`- ${e(A),w(()=>e(A).label)??""} (Need: ${e(A),w(()=>e(A).minCorrect)??""})`)),g(C,N)});var G=b(Me,2);{var ge=C=>{var A=Lo(),N=d(A),W=d(N),q=d(W),_e=b(W,2);L(()=>Z(q,e(Q))),E("click",_e,ka(()=>s(Q,null))),E("click",A,()=>s(Q,null)),E("keydown",A,be=>be.key==="Enter"||be.key===" "?s(Q,null):null),g(C,A)};I(G,C=>{e(Q)&&C(ge)})}L(()=>{St(U,`background-image: url('${v??""}')`),D(K,"src",e(i)),St(le,`left: ${w(()=>h.position?.x??50)??""}%; top: ${w(()=>h.position?.y??80)??""}%;`),D(me,"src",w(()=>h.image||""))}),g(t,U),Mt(),o()}var Po=y('<li><span class="mark svelte-1c9v5et"> </span> <span class="txt svelte-1c9v5et"> </span></li>'),jo=y('<img class="actor svelte-1c9v5et" draggable="false"/>'),Ro=y('<div class="tapbar-overlay svelte-1c9v5et"><div class="taptext svelte-1c9v5et"> </div> <div class="bar svelte-1c9v5et"><div class="fill svelte-1c9v5et"></div></div></div>'),Fo=y('<img class="item-abs svelte-1c9v5et" draggable="false"/>'),No=y('<img class="char svelte-1c9v5et" alt="Lina"/>'),qo=y("<div> </div>"),Do=y('<div class="modal svelte-1c9v5et"><div class="card svelte-1c9v5et"><!> <div class="h svelte-1c9v5et"> </div> <div class="p svelte-1c9v5et"></div> <button class="svelte-1c9v5et">OK</button></div></div>'),Bo=y('<div class="modal svelte-1c9v5et"><div class="card svelte-1c9v5et"><div class="h svelte-1c9v5et"> </div> <div class="p svelte-1c9v5et"> </div> <button class="svelte-1c9v5et">Restart</button></div></div>'),Ho=y('<div class="hud svelte-1c9v5et"><div class="checklist svelte-1c9v5et"><div class="title svelte-1c9v5et"> </div> <ol class="svelte-1c9v5et"></ol></div></div> <div class="viewport svelte-1c9v5et"><div class="stage svelte-1c9v5et"><img class="bg svelte-1c9v5et" alt="kitchen" draggable="false"/> <!> <div class="zone-overlay fridge svelte-1c9v5et"></div> <div class="zone-overlay board svelte-1c9v5et"><!></div> <div class="zone-overlay plate svelte-1c9v5et"></div> <!></div></div> <!> <!>',1);function Go(t,n){$t(n,!1);const r=()=>wt(Zt,"$currentLevelIndex",o),a=()=>wt(cn,"$hearts",o),[o,i]=In(),l=_(),f=_();let u=Yt(n,"data",8);const c=gn(),h=u()?.config??{},v=h?.ui??{},p=h?.rules??{},m=h?.layout??{},x=m?.baseSize?.w??1920,R=m?.baseSize?.h??1080;let T=_(),$=1,F=1,O=_(1),X=0,H=0;function Q(){if(!e(T))return;const k=e(T).getBoundingClientRect();$=k.width||1,F=k.height||1;const S=$/x,V=F/R;s(O,Math.max(S,V)),X=($-x*e(O))/2,H=(F-R*e(O))/2}fn(()=>{Q();const k=new ResizeObserver(Q);return k.observe(e(T)),()=>k.disconnect()});function B(k,S){const V=e(T).getBoundingClientRect(),we=(k-V.left-X)/e(O),We=(S-V.top-H)/e(O);return{x:we,y:We}}const U=h?.stations??{},K={fridge:U.fridgeZoneId??"fridge_zone",board:U.boardZoneId??"board_zone",plate:U.plateZoneId??"plate_zone"},le=h?.recipe?.strictOrder??!0,me=h?.recipe?.steps??[];let ne=_(0),Me=_(!!v?.showStepPopupAtStart),Le=_(!1);const G=p?.maxMistakesBeforeFail??2,ge=p?.mistakePenaltyHearts??1;let C=_(G+1),A=_(0);const N=h?.sounds??{},W=new Map;function q(k){if(!k)return;const S=N[k]??k;if(!S)return;let V=W.get(S);V||(V=new Audio(S),W.set(S,V),V.addEventListener("error",()=>{}));try{V.currentTime=0,V.play().catch(()=>{})}catch{}}function _e(k=[]){return k.map(S=>({id:S.id,name:S.name,image:S.image,zone:S.initialZone??K.fridge,initiallyVisible:S.initiallyVisible??!0,transformOnCompleteStepId:S.transformOnCompleteStepId??null,transformTo:S.transformTo??null}))}let be=_(_e(h?.ingredients??[]));function Re(){if(a()<=0&&r()===0){c("restartGame");return}s(C,G+1),s(ne,0),s(A,0),s(be,_e(h?.ingredients??[])),s(Le,!1),s(Me,!!v?.showStepPopupAtStart)}function Ae(){q("fail"),s(C,Math.max(0,e(C)-ge)),c("mistake")}function Fe(k,S){s(be,e(be).map(V=>V.id===k?{...V,zone:S}:V))}function Je(k){s(be,e(be).map(S=>S.id===k?{...S,initiallyVisible:!1}:S))}function Ne(k){s(be,e(be).map(S=>S.id===k?{...S,initiallyVisible:!0}:S))}function Qe(){if(q("success"),s(A,0),e(ne)>=me.length-1){q("joy"),setTimeout(()=>q("clap"),250),c("complete");return}s(ne,e(ne)+1)}function ae(k){if(le&&e(l)?.action!=="tap"||le&&k!==e(l)?.itemId)return Ae();const S=e(l)?.tapsRequired??15,V=e(l)?.tapSound??"cut";if(q(V),s(A,e(A)+1),e(A)>=S){const we=e(be).find(We=>We.id===k);if(we?.transformOnCompleteStepId&&e(l)?.id===we.transformOnCompleteStepId){const We=we.transformTo;We?.hideSelf&&Je(k),We?.showIngredientId&&(Ne(We.showIngredientId),Fe(We.showIngredientId,we.zone))}Qe()}}const z=m?.zones??{},ee=m?.fridgeSlots??{},de=m?.boardSlots??{},he=m?.plateSlots??{},j=m?.actors??[];function P(k){return k?`left:${k.x}px; top:${k.y}px; width:${k.w}px; height:${k.h}px;`:""}function xe(k){const S=k.id;return k.zone===K.fridge?ee[S]:k.zone===K.board?de[S]:k.zone===K.plate?he[S]:null}let ce=null,ke=0,ze=0,Ee=0,et=0;function Lt(k,S){if(e(l)?.action==="tap"&&S===e(l)?.itemId&&e(be).find(Xe=>Xe.id===S)?.zone===K.board){k.preventDefault(),ae(S);return}if(k.pointerType==="mouse"&&k.button!==0)return;const V=e(be).find(Xe=>Xe.id===S);if(!V)return;ce=S;const we=xe(V)??{x:0,y:0},We=B(k.clientX,k.clientY);ke=We.x-we.x,ze=We.y-we.y,Ee=we.x,et=we.y,k.currentTarget.setPointerCapture?.(k.pointerId)}function gt(k){if(!ce)return;const S=B(k.clientX,k.clientY);Ee=S.x-ke,et=S.y-ze}function te(k,S,V){return k&&S>=k.x&&S<=k.x+k.w&&V>=k.y&&V<=k.y+k.h}function M(k,S){return te(z[K.fridge],k,S)?K.fridge:te(z[K.board],k,S)?K.board:te(z[K.plate],k,S)?K.plate:null}function Y(k,S){if(le&&e(l)?.action!=="drag")return Ae();const V=e(l)?.itemId,we=e(l)?.from,We=e(l)?.to,Ue=e(be).find(He=>He.id===k)?.zone;if(!(!le||k===V)||!(!le||!we||Ue===we)||!(!le||S===We))return Ae();q("drop"),Fe(k,S),Qe()}function ue(k){if(!ce)return;const S=B(k.clientX,k.clientY),V=M(S.x,S.y),we=ce;if(ce=null,!V)return Ae();Y(we,V)}function ye(k){const S=xe(k)??{x:0,y:0,w:72,h:72},V=S.z??10;return ce===k.id?`left:${Ee}px; top:${et}px; width:${S.w}px; height:${S.h}px; z-index:9999;`:`left:${S.x}px; top:${S.y}px; width:${S.w}px; height:${S.h}px; z-index:${V};`}function ve(k){return k.anchor==="bottom"?`left:${k.x}px; top:${k.y-k.h}px; width:${k.w}px; height:${k.h}px;`:`left:${k.x}px; top:${k.y}px; width:${k.w}px; height:${k.h}px;`}ie(()=>e(ne),()=>{s(l,me[e(ne)])}),ie(()=>(e(C),r(),a()),()=>{e(C)<=0&&p?.restartOnFail&&(r()===0||a()>0)&&s(Le,!0)}),ie(()=>e(be),()=>{s(f,e(be).filter(k=>k.initiallyVisible!==!1))}),dn(),Rt();var Ce=Ho(),$e=oe(Ce),Oe=d($e),qe=d(Oe),Pe=d(qe),Ye=b(qe,2);it(Ye,5,()=>me,xt,(k,S,V)=>{var we=Po();let We;var Xe=d(we),Ue=d(Xe),ft=b(Xe,2),bt=d(ft);L(()=>{We=Gn(we,1,"svelte-1c9v5et",null,We,{done:V<e(ne)}),Z(Ue,V<e(ne)?"âœ“":"â—‹"),Z(bt,(e(S),w(()=>e(S).text)))}),g(k,we)});var rt=b($e,2),ut=d(rt),kt=d(ut),re=b(kt,2);it(re,1,()=>j,k=>k.id,(k,S)=>{var V=jo();L(we=>{D(V,"src",(e(S),w(()=>e(S).image))),D(V,"alt",(e(S),w(()=>e(S).id))),St(V,we)},[()=>(e(S),w(()=>ve(e(S))))]),g(k,V)});var se=b(re,2),J=b(se,2),Se=d(J);{var De=k=>{var S=Ro(),V=d(S),we=d(V),We=b(V,2),Xe=d(We);L(Ue=>{Z(we,`${e(A)??""}/${e(l),w(()=>e(l).tapsRequired)??""}`),St(Xe,Ue)},[()=>(e(A),e(l),w(()=>`width:${Math.min(100,e(A)/e(l).tapsRequired*100)}%`))]),g(k,S)};I(Se,k=>{e(l),w(()=>e(l)?.action==="tap"&&e(l)?.tapsRequired)&&k(De)})}var Be=b(J,2),pt=b(Be,2);it(pt,1,()=>e(f),k=>k.id,(k,S)=>{var V=Fo();L(we=>{St(V,we),D(V,"src",(e(S),w(()=>e(S).image))),D(V,"alt",(e(S),w(()=>e(S).name)))},[()=>(e(S),w(()=>ye(e(S))))]),E("pointerdown",V,we=>Lt(we,e(S).id)),g(k,V)}),Xn(rt,k=>s(T,k),()=>e(T));var ht=b(rt,2);{var Tt=k=>{var S=Do(),V=d(S),we=d(V);{var We=lt=>{var He=No();L(()=>D(He,"src",w(()=>v.stepPopup.characterImage))),g(lt,He)};I(we,lt=>{w(()=>v?.stepPopup?.characterImage)&&lt(We)})}var Xe=b(we,2),Ue=d(Xe),ft=b(Xe,2);it(ft,5,()=>(dt(u()),w(()=>v?.stepPopup?.lines??[u()?.instruction??""])),xt,(lt,He)=>{var Ke=qo(),Ht=d(Ke);L(()=>Z(Ht,e(He))),g(lt,Ke)});var bt=b(ft,2);L(()=>Z(Ue,w(()=>v?.stepPopup?.title??"Tip"))),E("click",bt,()=>s(Me,!1)),g(k,S)};I(ht,k=>{e(Me)&&k(Tt)})}var At=b(ht,2);{var Bt=k=>{var S=Bo(),V=d(S),we=d(V),We=d(we),Xe=b(we,2),Ue=d(Xe),ft=b(Xe,2);L(()=>{Z(We,w(()=>v?.retryPopup?.title??"Try again")),Z(Ue,w(()=>v?.retryPopup?.text??"Mistake. Try again."))}),E("click",ft,Re),g(k,S)};I(At,k=>{e(Le)&&k(Bt)})}L((k,S,V)=>{Z(Pe,w(()=>h?.checklist?.title??"Steps")),St(ut,`width:${x}px; height:${R}px; transform: translate(-50%, -50%) scale(${e(O)});`),D(kt,"src",w(()=>h.background)),St(se,k),St(J,S),St(Be,V)},[()=>w(()=>P(z[K.fridge])),()=>w(()=>P(z[K.board])),()=>w(()=>P(z[K.plate]))]),E("pointermove",rt,gt),E("pointerup",rt,ue),g(t,Ce),Mt(),i()}var Wo=y('<div class="intro-screen svelte-ul6re7"><img class="bg svelte-ul6re7" alt="Room"/> <img class="lina-big svelte-ul6re7" alt="Lina"/> <div class="bubble-center svelte-ul6re7"><p class="svelte-ul6re7"> </p> <button class="btn-ok svelte-ul6re7">OK</button></div></div>'),Yo=y('<div class="full-screen-click svelte-ul6re7" role="button" tabindex="0"><img class="bg svelte-ul6re7" alt="Closed wardrobe"/> <div class="message-box-bottom svelte-ul6re7"><p class="svelte-ul6re7"> </p> <small class="svelte-ul6re7">(Tap anywhere)</small></div></div>'),Uo=y('<img alt="Outfit" class="svelte-ul6re7"/>'),Vo=y('<span style="font-size: 2rem;" class="svelte-ul6re7">ðŸ‘—</span>'),Xo=y('<button class="outfit-card svelte-ul6re7"><div class="icon-box svelte-ul6re7"><!></div> <span class="outfit-name svelte-ul6re7"> </span></button>'),Ko=y('<div class="full-screen-relative svelte-ul6re7"><img class="bg svelte-ul6re7" alt="Wardrobe Open"/> <div class="clothes-container svelte-ul6re7"><h2 class="instruction-text svelte-ul6re7"> </h2> <div class="outfits-grid svelte-ul6re7"></div></div></div>'),Zo=y('<button class="outfit-item-button svelte-ul6re7"><img class="outfit-item svelte-ul6re7"/></button>'),Jo=y('<img class="bg svelte-ul6re7" alt="Empty wardrobe"/> <div class="outfits-row svelte-ul6re7"></div> <div class="instruction svelte-ul6re7"> </div>',1),Qo=y(`<div class="error-screen svelte-ul6re7"><img class="bg bg-dimmed svelte-ul6re7" alt="Wardrobe background"/> <div class="error-modal svelte-ul6re7"><span style="font-size: 3rem;" class="svelte-ul6re7">âŒ</span> <h3 class="svelte-ul6re7">Not suitable!</h3> <p class="svelte-ul6re7">I can't wear this right now.</p> <button class="btn-retry svelte-ul6re7">Try Again</button></div></div>`),el=y('<div class="ironing-screen svelte-ul6re7"><img class="bg bg-dimmed svelte-ul6re7" alt="Background"/> <div class="z-index-wrapper svelte-ul6re7"><div class="ironing-instruction svelte-ul6re7"><h3 class="svelte-ul6re7">Smooth it out!</h3></div> <div class="fabric-container svelte-ul6re7"><img src="./game/items/fabric.png" class="fabric-base svelte-ul6re7" alt="Fabric"/> <canvas class="svelte-ul6re7"></canvas></div></div></div>'),tl=y('<div class="level-container svelte-ul6re7"><!></div>');function nl(t,n){$t(n,!1);const r=()=>wt(ur,"$characterOutfit",a),[a,o]=In(),i=_(),l=gn(),f={pajamas:"./game/characters/Lina/pajamas/thinking.png",school_uniform:"./game/characters/Lina/suit/thinking.png"},u={fabric:"./game/items/fabric.png",character:{pajamas:"./game/characters/Lina/pajamas/thinking.png"},backgrounds:{intro:"./game/backgrounds/wardrobeempty.png",closed:"./game/backgrounds/wardrobeclosed.png",opened:"./game/backgrounds/wardrobeopened.png"},dialogs:{intro:"Hi! I need to get ready.",closed:"Let's choose an outfit!",opened:"Which one should I wear?",ironing:"It's wrinkled! Let's iron it."},outfits:[{id:"dress",name:"Evening Dress",thumb:"./game/items/dirty_dress.png",fabricTexture:"./game/items/dirty_dress.png",isCorrect:!1},{id:"sport",name:"Sporty Style",thumb:"./game/items/sport_suit.png",fabricTexture:"./game/items/sport_suit.png",isCorrect:!1},{id:"school",name:"School Uniform",thumb:"./game/items/school_suit.png",fabricTexture:"./game/items/school_suit.png",isCorrect:!0}]};let c=_("intro"),h=_(),v,p=!1,m=null;function x(G){if(!G)return;const ge=new Audio(G);return ge.play().catch(()=>{}),ge}function R(G){G&&(G.pause(),G.currentTime=0)}function T(){if(!e(h))return;const G=e(h).getBoundingClientRect();oa(h,e(h).width=G.width),oa(h,e(h).height=G.height),v=e(h).getContext("2d"),v.fillStyle="rgba(100, 100, 100, 0.8)",v.fillRect(0,0,e(h).width,e(h).height),v.globalCompositeOperation="destination-out"}function $(G){const ge=e(h).getBoundingClientRect(),C=G.touches?G.touches[0].clientX:G.clientX,A=G.touches?G.touches[0].clientY:G.clientY;return{x:C-ge.left,y:A-ge.top}}function F(G){p=!0,X(G)}function O(){p=!1,Q()}function X(G){if(!p)return;G.preventDefault();const ge=$(G);v.beginPath(),v.arc(ge.x,ge.y,40,0,Math.PI*2),v.fill()}let H=!1;function Q(){if(!v||H)return;const ge=v.getImageData(0,0,e(h).width,e(h).height).data;let C=0;for(let W=3;W<ge.length;W+=4)ge[W]===0&&C++;const A=e(h).width*e(h).height;C/A*100>92&&(H=!0,p=!1,R(m),m=null,x("./game/sfx/joy.wav"),x("./game/sfx/success.wav"),setTimeout(()=>{le()},1500))}function B(){e(c)==="intro"?s(c,"closed"):e(c)==="closed"?(x("./game/sfx/dooropened.wav"),s(c,"opened")):e(c)==="opened"&&s(c,"selection")}function U(G){G.isCorrect?(x("./game/sfx/correctdress.wav"),x("./game/sfx/joy.wav"),s(c,"ironing"),setTimeout(()=>{m=x("./game/sfx/ironing.wav")},500)):(x("./game/sfx/fail.wav"),cn.update(ge=>Math.max(0,ge-1)),s(c,"wrong_choice"))}function K(){R(m),m=null,s(c,"opened")}fn(()=>()=>{R(m)});function le(){ur.set("school_uniform"),l("complete")}ie(()=>r(),()=>{s(i,f[r()]||f.pajamas)}),ie(()=>e(c),()=>{e(c)==="ironing"&&setTimeout(T,100)}),dn(),Rt();var me=tl(),ne=d(me);{var Me=G=>{var ge=Wo(),C=d(ge),A=b(C,2),N=b(A,2),W=d(N),q=d(W),_e=b(W,2);L(()=>{D(C,"src",w(()=>u.backgrounds.intro)),D(A,"src",e(i)),Z(q,w(()=>u.dialogs.intro))}),E("click",_e,B),g(G,ge)},Le=G=>{var ge=Ie(),C=oe(ge);{var A=W=>{var q=Yo(),_e=d(q),be=b(_e,2),Re=d(be),Ae=d(Re);L(()=>{D(_e,"src",w(()=>u.backgrounds.closed)),Z(Ae,w(()=>u.dialogs.closed))}),E("click",q,B),E("keydown",q,Fe=>Fe.key==="Enter"&&B()),g(W,q)},N=W=>{var q=Ie(),_e=oe(q);{var be=Ae=>{var Fe=Ko(),Je=d(Fe),Ne=b(Je,2),Qe=d(Ne),ae=d(Qe),z=b(Qe,2);it(z,5,()=>w(()=>u.outfits),xt,(ee,de)=>{var he=Xo(),j=d(he),P=d(j);{var xe=Ee=>{var et=Uo();L(()=>D(et,"src",(e(de),w(()=>e(de).thumb)))),g(Ee,et)},ce=Ee=>{var et=Vo();g(Ee,et)};I(P,Ee=>{e(de),w(()=>e(de).thumb)?Ee(xe):Ee(ce,!1)})}var ke=b(j,2),ze=d(ke);L(()=>Z(ze,(e(de),w(()=>e(de).name)))),E("click",he,()=>U(e(de))),g(ee,he)}),L(()=>{D(Je,"src",w(()=>u.backgrounds.opened)),Z(ae,w(()=>u.dialogs.opened))}),g(Ae,Fe)},Re=Ae=>{var Fe=Ie(),Je=oe(Fe);{var Ne=ae=>{var z=Jo(),ee=oe(z),de=b(ee,2);it(de,5,()=>w(()=>u.outfits),xt,(P,xe)=>{var ce=Zo(),ke=d(ce);L(()=>{D(ce,"aria-label",`Choose ${e(xe),w(()=>e(xe).name)??""}`),D(ke,"src",(e(xe),w(()=>e(xe).thumb||e(xe).image))),D(ke,"alt",(e(xe),w(()=>e(xe).name)))}),E("click",ce,()=>U(e(xe))),g(P,ce)});var he=b(de,2),j=d(he);L(()=>{D(ee,"src",w(()=>u.backgrounds.empty)),Z(j,w(()=>u.dialogs.choice))}),g(ae,z)},Qe=ae=>{var z=Ie(),ee=oe(z);{var de=j=>{var P=Qo(),xe=d(P),ce=b(xe,2),ke=b(d(ce),6);L(()=>D(xe,"src",w(()=>u.backgrounds.opened))),E("click",ke,K),g(j,P)},he=j=>{var P=Ie(),xe=oe(P);{var ce=ke=>{var ze=el(),Ee=d(ze),et=b(Ee,2),Lt=b(d(et),2),gt=b(d(Lt),2);Xn(gt,te=>s(h,te),()=>e(h)),L(()=>D(Ee,"src",w(()=>u.backgrounds.opened))),E("mousedown",gt,F),E("mousemove",gt,X),E("mouseup",gt,O),E("mouseleave",gt,O),E("touchstart",gt,F),E("touchmove",gt,X),E("touchend",gt,O),g(ke,ze)};I(xe,ke=>{e(c)==="ironing"&&ke(ce)},!0)}g(j,P)};I(ee,j=>{e(c)==="wrong_choice"?j(de):j(he,!1)},!0)}g(ae,z)};I(Je,ae=>{e(c)==="selection"?ae(Ne):ae(Qe,!1)},!0)}g(Ae,Fe)};I(_e,Ae=>{e(c)==="opened"?Ae(be):Ae(Re,!1)},!0)}g(W,q)};I(C,W=>{e(c)==="closed"?W(A):W(N,!1)},!0)}g(G,ge)};I(ne,G=>{e(c)==="intro"?G(Me):G(Le,!1)})}g(t,me),Mt(),o()}var rl=y('<div class="debug svelte-t4z39y"><h3 class="svelte-t4z39y">Maze config missing</h3> <pre class="svelte-t4z39y"> </pre></div>'),al=y('<div class="fade-black svelte-t4z39y"></div>'),sl=y('<button class="continue-btn svelte-t4z39y">Continue</button>'),il=y('<img src="./game/characters/Lina/suit/base.png" alt="Lina" class="lina-character svelte-t4z39y"/> <div class="dialog-box svelte-t4z39y"><p class="dialog-text svelte-t4z39y"> <span class="cursor svelte-t4z39y">|</span></p> <!></div>',1),ol=y('<div class="pre-intro-scene svelte-t4z39y"><img src="./game/backgrounds/stairs.png" alt="stairs" class="stairs-bg svelte-t4z39y"/> <!></div>'),ll=y('<button class="continue-btn svelte-t4z39y">Continue</button>'),cl=y('<img src="./game/characters/Lina/suit/thinking.png" alt="Lina thinking" class="lina-thinking svelte-t4z39y"/> <div class="dialog-box dialog-box-right svelte-t4z39y"><p class="dialog-text svelte-t4z39y"> <span class="cursor svelte-t4z39y">|</span></p> <!></div>',1),ul=y('<div class="house-scene svelte-t4z39y"><img src="./game/backgrounds/house.png" alt="house" class="house-bg svelte-t4z39y"/> <!></div>'),vl=y('<img src="./game/backgrounds/maze_scene.png" alt="maze scene" class="maze-scene-bg svelte-t4z39y"/>'),dl=y('<button class="continue-btn svelte-t4z39y">Continue</button>'),fl=y('<img src="./game/characters/Lina/suit/scared.png" alt="Lina scared" class="lina-scared svelte-t4z39y"/> <div class="dialog-box svelte-t4z39y"><p class="dialog-text svelte-t4z39y"> <span class="cursor svelte-t4z39y">|</span></p> <!></div>',1),gl=y('<div class="maze-scene svelte-t4z39y"><!> <!></div>'),pl=y('<img src="./game/backgrounds/bus_close.png" alt="bus closed" class="bus-bg svelte-t4z39y"/>'),hl=y('<img src="./game/backgrounds/bus_open.png" alt="bus open" class="bus-bg svelte-t4z39y"/>'),ml=y('<button class="continue-btn svelte-t4z39y">Continue</button>'),_l=y('<img src="./game/characters/Lina/suit/base.png" alt="Lina" class="lina-bus svelte-t4z39y"/> <div class="dialog-box svelte-t4z39y"><p class="dialog-text svelte-t4z39y"> <span class="cursor svelte-t4z39y">|</span></p> <!></div>',1),bl=y('<div class="bus-scene svelte-t4z39y"><!> <!> <!></div>'),yl=y('<div class="banner svelte-t4z39y"> </div>'),wl=y('<button class="ok-btn svelte-t4z39y">OK</button>'),xl=y('<div class="overlay svelte-t4z39y"><div class="modal svelte-t4z39y"><p class="intro-text svelte-t4z39y"> <span class="cursor svelte-t4z39y">|</span></p> <!></div></div>'),kl=y('<img class="mazeOverlay svelte-t4z39y" alt="maze" draggable="false"/>'),Tl=y('<div class="wall svelte-t4z39y"></div>'),Sl=y('<img alt="player" draggable="false" class="svelte-t4z39y"/>'),Il=y('<div class="fallback svelte-t4z39y"></div>'),zl=y('<div class="finish svelte-t4z39y"></div> <div><!></div>',1),El=y('<span class="svelte-t4z39y"></span>'),$l=y("<div><!></div>"),Ml=y('<div class="grid svelte-t4z39y"></div>'),Cl=y('<div class="controls svelte-t4z39y" aria-label="Mobile controls"><button aria-label="Up" class="svelte-t4z39y">â–²</button> <div class="row svelte-t4z39y"><button aria-label="Left" class="svelte-t4z39y">â—€</button> <button aria-label="Right" class="svelte-t4z39y">â–¶</button></div> <button aria-label="Down" class="svelte-t4z39y">â–¼</button></div>'),Ll=y('<div class="wrap svelte-t4z39y"><!> <!> <!> <!> <!> <!> <!> <div class="stageHolder svelte-t4z39y"><div class="stage svelte-t4z39y"><!> <div class="walls svelte-t4z39y"></div> <!> <!></div></div> <!></div>');function Al(t,n){$t(n,!1);const r=_(),a=_(),o=_(),i=_(),l=_(),f=_(),u=_(),c=_(),h=_(),v=_(),p=_(),m=_(),x=_(),R=_(),T=_(),$=_(),F=_(),O=_(),X=_();let H=Yt(n,"data",8);const Q=gn();let B=_(0),U=_(0),K=[],le=_(!1),me=_(!1),ne=_(!1),Me=_(1),Le=_(1),G=_("down");function ge(){e(m)&&e(m).x!==void 0?s(Me,e(m).x):s(Me,1),e(m)&&e(m).y!==void 0?s(Le,e(m).y):s(Le,1),s(G,"down")}let C=_(!1),A;function N(){A&&A.matches?s(C,!0):s(C,!1),Ue()}let W=_(!1),q=_(),_e=_(1),be,Re=_(!0),Ae=_(!1);e(r)?.ui?.introText,e(r)?.ui?.introButton;let Fe,Je,Ne,Qe,ae,z,ee,de=_(!1),he=_(""),j="I'm already ready. I need to hurry to school. I'll go to the bus right now. Mom said I might get lost, but I don't believe it!",P=0,xe=_(!1),ce=_(!1),ke=_(!1),ze=_(!1),Ee=_(""),et="What wonderful weather. A great first day of school. Time to go!",Lt=0,gt=_(!1),te=_(!1),M=_(!1),Y=_(!1),ue=_(""),ye="I thought I had already walked this path with mom. But now I can't find the way. Oh no. I can't be late for school. Where is the right path?",ve=0,Ce=_(!1),$e=_(!1),Oe=_(!1),qe=_(!1),Pe=_(!1),Ye=_(""),rt="Well, I found the way. Made it to the bus. Time to go to school.",ut=0,kt=_(!1),re=_(""),se=e(r)?.ui?.introText??"Help Lina find the way to the bus!",J=0,Se=_(!1);function De(){if(document.querySelectorAll("audio").forEach(Te=>{Te.pause(),Te.currentTime=0}),ae){try{ae.pause(),ae.currentTime=0}catch{}ae=null}if(typeof window<"u"&&window._mazeMusicSound){try{window._mazeMusicSound.pause(),window._mazeMusicSound.currentTime=0}catch{}window._mazeMusicSound=null}if(Fe){try{Fe.pause(),Fe.currentTime=0}catch{}Fe=null}if(Je){try{Je.pause(),Je.currentTime=0}catch{}Je=null}if(Ne){try{Ne.pause(),Ne.currentTime=0}catch{}Ne=null}if(Qe){try{Qe.pause(),Qe.currentTime=0}catch{}Qe=null}if(z){try{z.pause(),z.currentTime=0}catch{}z=null}if(ee){try{ee.pause(),ee.currentTime=0}catch{}ee=null}}function Be(){s(Re,!1),s(ce,!0),Je=new Audio("./game/sfx/birdnature.wav"),Je.play().catch(()=>{}),setTimeout(()=>{Ne=new Audio("./game/sfx/fromhouse.wav"),Ne.play().catch(()=>{}),setTimeout(()=>{s(ze,!0),setTimeout(()=>{V()},500)},500)},1e3)}function pt(){s(ke,!0),setTimeout(()=>{s(ce,!1),s(ke,!1),s(te,!0),s(M,!0),setTimeout(()=>{Qe=new Audio("./game/sfx/fromhousetomaze.wav"),Qe.play().catch(()=>{}),setTimeout(()=>{s(ke,!0),setTimeout(()=>{s(ke,!1),s(Y,!0),setTimeout(()=>{we()},500)},500)},1500)},300)},500)}function ht(){s(te,!1),s(Ae,!0),ae=new Audio("./game/sfx/mazemusic.wav"),ae.loop=!0,ae.volume=.7,typeof window<"u"&&(window._mazeMusicSound=ae),ae.play().catch(()=>{}),setTimeout(()=>{S()},300)}function Tt(){Ke(),s($e,!0),s(Oe,!0),z=new Audio("./game/sfx/busstopped.wav"),z.play().catch(()=>{}),setTimeout(()=>{s(Pe,!0),setTimeout(()=>{At()},500)},1e3)}function At(){ut<rt.length?(s(Ye,rt.substring(0,ut+1)),ut++,setTimeout(At,30)):s(kt,!0)}function Bt(){s(Oe,!1),s(qe,!0),ee=new Audio("./game/sfx/busdoors.wav"),ee.play().catch(()=>{}),setTimeout(()=>{k()},2e3)}function k(){s($e,!1),Q("complete")}function S(){J<se.length?(s(re,se.substring(0,J+1)),J++,setTimeout(S,30)):s(Se,!0)}function V(){Lt<et.length?(s(Ee,et.substring(0,Lt+1)),Lt++,setTimeout(V,30)):s(gt,!0)}function we(){ve<ye.length?(s(ue,ye.substring(0,ve+1)),ve++,setTimeout(we,30)):s(Ce,!0)}function We(){s(Ae,!1)}function Xe(){P<j.length?(s(he,j.substring(0,P+1)),P++,setTimeout(Xe,30)):s(xe,!0)}function Ue(){if(!e(q)||!e($)||!e(F))return;const fe=e(q).getBoundingClientRect(),Te=16;let Ot=0;e(W)&&(Ot=170);const Kt=fe.width-Te*2,tn=fe.height-Te*2-Ot;if(Kt<=0||tn<=0)return;const Qn=Kt/e($),Pn=tn/e(F);let Ft=Qn;Pn<Qn&&(Ft=Pn),Ft>1&&(Ft=1),Ft<.2&&(Ft=.2),s(_e,Ft)}function ft(fe,Te){return!K||K.length===0||Te<0||Te>=e(U)||fe<0||fe>=e(B)||!K[Te]||K[Te][fe]===void 0?1:K[Te][fe]}function bt(fe,Te){fe===1&&s(G,"right"),fe===-1&&s(G,"left"),Te===1&&s(G,"down"),Te===-1&&s(G,"up");const Ot=e(Me)+fe,Kt=e(Le)+Te;if(ft(Ot,Kt)!==1&&(s(Me,Ot),s(Le,Kt),Math.abs(e(Me)-e(x).x)<=1&&Math.abs(e(Le)-e(x).y)<=1)){if(ae&&(ae.pause(),ae.currentTime=0),typeof window<"u"&&window._mazeMusicSound)try{window._mazeMusicSound.pause(),window._mazeMusicSound.currentTime=0,window._mazeMusicSound=null}catch{}Tt()}}let lt=null;function He(fe,Te){lt&&clearInterval(lt),bt(fe,Te),lt=setInterval(()=>{bt(fe,Te)},150)}function Ke(){lt&&(clearInterval(lt),lt=null)}function Ht(fe){if(fe.key==="g"){s(le,!e(le));return}if(fe.key==="c"){s(me,!e(me));return}if(fe.key==="t"){s(ne,!e(ne));return}fe.key==="ArrowLeft"&&fe.type==="keydown"&&He(-1,0),fe.key==="ArrowRight"&&fe.type==="keydown"&&He(1,0),fe.key==="ArrowUp"&&fe.type==="keydown"&&He(0,-1),fe.key==="ArrowDown"&&fe.type==="keydown"&&He(0,1)}function pn(fe){(fe.key==="ArrowLeft"||fe.key==="ArrowRight"||fe.key==="ArrowUp"||fe.key==="ArrowDown")&&Ke()}function Jn(fe){(fe.key==="ArrowLeft"||fe.key==="ArrowRight"||fe.key==="ArrowUp"||fe.key==="ArrowDown")&&fe.preventDefault()}function wr(fe,Te,Ot,Kt=200,tn=!1){return new Promise((Qn,Pn)=>{const Ft=new Image;Ft.crossOrigin="anonymous",Ft.src=fe,Ft.onload=()=>{const zn=document.createElement("canvas");zn.width=Te,zn.height=Ot;const kr=zn.getContext("2d",{willReadFrequently:!0});kr.imageSmoothingEnabled=!0,kr.drawImage(Ft,0,0,Te,Ot);const Tr=kr.getImageData(0,0,Te,Ot).data,er=[];for(let jn=0;jn<Ot;jn++){er[jn]=[];for(let Rn=0;Rn<Te;Rn++){const Sr=(jn*Te+Rn)*4,Ir=Tr[Sr],Pr=Tr[Sr+1],jr=Tr[Sr+2];let tr=(Ir+Pr+jr)/3<Kt;tn&&(tr=!tr),er[jn][Rn]=tr?1:0}}Qn(er)},Ft.onerror=zn=>{Pn(zn)}})}fn(()=>{Fe=new Audio("./game/sfx/stairsrun.wav"),Fe.play().catch(()=>{}),setTimeout(()=>{s(de,!0),setTimeout(()=>{Xe()},500)},1500),A=window.matchMedia("(pointer: coarse)"),A&&A.matches?(s(C,!1),setTimeout(()=>{Ue(),setTimeout(()=>{N()},50)},50)):N(),A.addEventListener?A.addEventListener("change",N):A.addListener(N),be=new ResizeObserver(Ue),be.observe(e(q)),Ue(),window.addEventListener("orientationchange",Ue),window.addEventListener("keydown",Ht),window.addEventListener("keydown",Jn,{passive:!1})}),On(()=>{De(),A&&(A.removeEventListener?A.removeEventListener("change",N):A.removeListener(N)),be&&be.disconnect(),window.removeEventListener("orientationchange",Ue),window.removeEventListener("keydown",Ht),window.removeEventListener("keyup",pn),window.removeEventListener("keydown",Jn),Ke()});let hn=_(!1),xr=_("");async function As(){if(s(hn,!1),s(xr,""),e(l)&&e(B)>0&&e(U)>0)try{K=await wr(e(l),e(B),e(U),e(c),e(h)),s(hn,!0),ge(),Ue()}catch{s(xr,"Image load failed: "+e(l)),K=e(p),K&&K.length>0&&s(hn,!0),ge()}else K=e(p),K&&K.length>0&&s(hn,!0),ge()}ie(()=>dt(H()),()=>{s(r,H()?.config??{})}),ie(()=>e(r),()=>{s(a,e(r)?.maze??{})}),ie(()=>e(r),()=>{s(o,e(r)?.background??"")}),ie(()=>e(r),()=>{s(i,e(r)?.mazeImage??"")}),ie(()=>e(a),()=>{s(l,e(a)?.fromImage??"")}),ie(()=>e(a),()=>{s(f,Number(e(a)?.imageGrid?.w??0))}),ie(()=>e(a),()=>{s(u,Number(e(a)?.imageGrid?.h??0))}),ie(()=>e(a),()=>{s(c,Number(e(a)?.threshold??200))}),ie(()=>e(a),()=>{s(h,!!e(a)?.invert)}),ie(()=>(e(l),e(f),e(a),e(u)),()=>{e(l)&&e(f)>0?s(B,e(f)):s(B,Number(e(a)?.gridWidth??0)),e(l)&&e(u)>0?s(U,e(u)):s(U,Number(e(a)?.gridHeight??0))}),ie(()=>e(a),()=>{s(v,Number(e(a)?.cellSize??64))}),ie(()=>e(a),()=>{s(p,e(a)?.cells??[])}),ie(()=>e(a),()=>{s(m,e(a)?.start??{x:1,y:1})}),ie(()=>(e(a),e(B),e(U)),()=>{s(x,e(a)?.finish??{x:Math.max(1,e(B)-2),y:Math.max(1,e(U)-2)})}),ie(()=>e(r),()=>{s(R,e(r)?.player?.image??"")}),ie(()=>e(r),()=>{s(T,Number(e(r)?.player?.scale??1))}),ie(()=>(e(B),e(v)),()=>{s($,e(B)*e(v))}),ie(()=>(e(U),e(v)),()=>{s(F,e(U)*e(v))}),ie(()=>(e(r),e(C)),()=>{e(r)?.controls?.mobile==="onScreenArrows"&&e(C)?s(W,!0):s(W,!1)}),ie(()=>{},()=>{As()}),ie(()=>(e(Me),e(v)),()=>{s(O,e(Me)*e(v))}),ie(()=>(e(Le),e(v)),()=>{s(X,e(Le)*e(v))}),dn(),Rt();var Ta=Ie(),Os=oe(Ta);{var Ps=fe=>{var Te=rl(),Ot=b(d(Te),2),Kt=d(Ot);L(tn=>Z(Kt,tn),[()=>(e(a),w(()=>JSON.stringify(e(a),null,2)))]),g(fe,Te)},js=fe=>{var Te=Ll(),Ot=d(Te);{var Kt=pe=>{var Ge=al();g(pe,Ge)};I(Ot,pe=>{e(ke)&&pe(Kt)})}var tn=b(Ot,2);{var Qn=pe=>{var Ge=ol(),tt=b(d(Ge),2);{var mt=Ze=>{var ct=il(),st=b(oe(ct),2),nt=d(st),at=d(nt),_t=b(nt,2);{var nn=yt=>{var Pt=sl();E("click",Pt,Be),g(yt,Pt)};I(_t,yt=>{e(xe)&&yt(nn)})}L(()=>Z(at,e(he))),g(Ze,ct)};I(tt,Ze=>{e(de)&&Ze(mt)})}g(pe,Ge)};I(tn,pe=>{e(Re)&&pe(Qn)})}var Pn=b(tn,2);{var Ft=pe=>{var Ge=ul(),tt=b(d(Ge),2);{var mt=Ze=>{var ct=cl(),st=b(oe(ct),2),nt=d(st),at=d(nt),_t=b(nt,2);{var nn=yt=>{var Pt=ll();E("click",Pt,pt),g(yt,Pt)};I(_t,yt=>{e(gt)&&yt(nn)})}L(()=>Z(at,e(Ee))),g(Ze,ct)};I(tt,Ze=>{e(ze)&&Ze(mt)})}g(pe,Ge)};I(Pn,pe=>{e(ce)&&pe(Ft)})}var zn=b(Pn,2);{var kr=pe=>{var Ge=gl(),tt=d(Ge);{var mt=st=>{var nt=vl();g(st,nt)};I(tt,st=>{e(M)&&st(mt)})}var Ze=b(tt,2);{var ct=st=>{var nt=fl(),at=b(oe(nt),2),_t=d(at),nn=d(_t),yt=b(_t,2);{var Pt=rn=>{var an=dl();E("click",an,ht),g(rn,an)};I(yt,rn=>{e(Ce)&&rn(Pt)})}L(()=>Z(nn,e(ue))),g(st,nt)};I(Ze,st=>{e(Y)&&st(ct)})}g(pe,Ge)};I(zn,pe=>{e(te)&&pe(kr)})}var Qr=b(zn,2);{var Tr=pe=>{var Ge=bl(),tt=d(Ge);{var mt=at=>{var _t=pl();g(at,_t)};I(tt,at=>{e(Oe)&&at(mt)})}var Ze=b(tt,2);{var ct=at=>{var _t=hl();g(at,_t)};I(Ze,at=>{e(qe)&&at(ct)})}var st=b(Ze,2);{var nt=at=>{var _t=_l(),nn=b(oe(_t),2),yt=d(nn),Pt=d(yt),rn=b(yt,2);{var an=nr=>{var za=ml();E("click",za,Bt),g(nr,za)};I(rn,nr=>{e(kt)&&nr(an)})}L(()=>Z(Pt,e(Ye))),g(at,_t)};I(st,at=>{e(Pe)&&e(Oe)&&at(nt)})}g(pe,Ge)};I(Qr,pe=>{e($e)&&pe(Tr)})}var er=b(Qr,2);{var jn=pe=>{var Ge=yl(),tt=d(Ge);L(()=>Z(tt,`Loading mazeâ€¦ ${e(xr)??""}`)),g(pe,Ge)};I(er,pe=>{e(hn)||pe(jn)})}var Rn=b(er,2);{var Sr=pe=>{var Ge=xl(),tt=d(Ge),mt=d(tt),Ze=d(mt),ct=b(mt,2);{var st=nt=>{var at=wl();E("click",at,We),g(nt,at)};I(ct,nt=>{e(Se)&&nt(st)})}L(()=>Z(Ze,e(re))),g(pe,Ge)};I(Rn,pe=>{e(Ae)&&pe(Sr)})}var Ir=b(Rn,2),Pr=d(Ir),jr=d(Pr);{var Sa=pe=>{var Ge=kl();L(()=>D(Ge,"src",e(i))),g(pe,Ge)};I(jr,pe=>{e(i)&&!e(Re)&&!e(ce)&&!e(te)&&!e($e)&&!e(Ae)&&pe(Sa)})}var tr=b(jr,2);it(tr,5,()=>(e(U),w(()=>Array(e(U)))),xt,(pe,Ge,tt)=>{var mt=Ie(),Ze=oe(mt);it(Ze,1,()=>(e(B),w(()=>Array(e(B)))),xt,(ct,st,nt,at)=>{var _t=Ie(),nn=oe(_t);{var yt=Pt=>{var rn=Tl();L(()=>St(rn,`
                                        left:${nt*e(v)}px;
                                        top:${tt*e(v)}px;
                                        width:${e(v)??""}px;
                                        height:${e(v)??""}px;
                                    `)),g(Pt,rn)};I(nn,Pt=>{w(()=>ft(nt,tt)===1)&&Pt(yt)})}g(ct,_t)}),g(pe,mt)});var Ia=b(tr,2);{var Rs=pe=>{var Ge=zl(),tt=oe(Ge),mt=b(tt,2),Ze=d(mt);{var ct=nt=>{var at=Sl();L(()=>D(at,"src",e(R))),g(nt,at)},st=nt=>{var at=Il();g(nt,at)};I(Ze,nt=>{e(R)?nt(ct):nt(st,!1)})}L(()=>{St(tt,`
                            left:${e(x),e(v),w(()=>e(x).x*e(v))??""}px;
                            top:${e(x),e(v),w(()=>e(x).y*e(v))??""}px;
                            width:${e(v)??""}px;
                            height:${e(v)??""}px;
                        `),Gn(mt,1,`player ${e(G)??""}`,"svelte-t4z39y"),St(mt,`
                            left:${e(O)??""}px;
                            top:${e(X)??""}px;
                            width:${e(v)*1.5}px;
                            height:${e(v)*1.5}px;
                            --ps:${e(T)??""};
                        `)}),g(pe,Ge)};I(Ia,pe=>{!e(Re)&&!e(ce)&&!e(te)&&!e($e)&&!e(Ae)&&pe(Rs)})}var Fs=b(Ia,2);{var Ns=pe=>{var Ge=Ml();it(Ge,5,()=>(e(U),w(()=>Array(e(U)))),xt,(tt,mt,Ze)=>{var ct=Ie(),st=oe(ct);it(st,1,()=>(e(B),w(()=>Array(e(B)))),xt,(nt,at,_t,nn)=>{var yt=$l(),Pt=d(yt);{var rn=an=>{var nr=El();nr.textContent=`${_t},${Ze}`,g(an,nr)};I(Pt,an=>{e(me)&&an(rn)})}L(an=>{Gn(yt,1,`cell ${an??""}`,"svelte-t4z39y"),St(yt,`
                                        left:${_t*e(v)}px;
                                        top:${Ze*e(v)}px;
                                        width:${e(v)??""}px;
                                        height:${e(v)??""}px;
                                    `)},[()=>(e(ne),w(()=>e(ne)?ft(_t,Ze)===1?"wallCell":"freeCell":""))]),g(nt,yt)}),g(tt,ct)}),g(pe,Ge)};I(Fs,pe=>{e(le)&&pe(Ns)})}var qs=b(Ir,2);{var Ds=pe=>{var Ge=Cl(),tt=d(Ge),mt=b(tt,2),Ze=d(mt),ct=b(Ze,2),st=b(mt,2);E("mousedown",tt,()=>He(0,-1)),E("mouseup",tt,Ke),E("mouseleave",tt,Ke),E("touchstart",tt,()=>He(0,-1)),E("touchend",tt,Ke),E("mousedown",Ze,()=>He(-1,0)),E("mouseup",Ze,Ke),E("mouseleave",Ze,Ke),E("touchstart",Ze,()=>He(-1,0)),E("touchend",Ze,Ke),E("mousedown",ct,()=>He(1,0)),E("mouseup",ct,Ke),E("mouseleave",ct,Ke),E("touchstart",ct,()=>He(1,0)),E("touchend",ct,Ke),E("mousedown",st,()=>He(0,1)),E("mouseup",st,Ke),E("mouseleave",st,Ke),E("touchstart",st,()=>He(0,1)),E("touchend",st,Ke),g(pe,Ge)};I(qs,pe=>{e(W)&&pe(Ds)})}Xn(Te,pe=>s(q,pe),()=>e(q)),L(()=>{St(Te,`background-image:url('${e(o)??""}')`),St(Ir,`width:${e($)*e(_e)}px; height:${e(F)*e(_e)}px;`),St(Pr,`
                    width:${e($)??""}px;
                    height:${e(F)??""}px;
                    transform: scale(${e(_e)??""});
                    transform-origin: top left;
                `)}),g(fe,Te)};I(Os,fe=>{!e(B)||!e(U)||!e($)||!e(F)?fe(Ps):fe(js,!1)})}g(t,Ta),Mt()}var Ol=y('<img class="sceneImg svelte-18ulxsm" alt="" draggable="false"/>'),Pl=y('<div class="sceneFallback svelte-18ulxsm"></div>'),jl=y('<div class="speaker svelte-18ulxsm"> </div>'),Rl=y('<div class="novel svelte-18ulxsm" role="button" tabindex="0"><!> <div class="bubble svelte-18ulxsm"><!> <div class="text svelte-18ulxsm"> </div> <div class="actions svelte-18ulxsm"><button class="btn ghost svelte-18ulxsm">Skip</button> <button class="btn svelte-18ulxsm"> </button></div></div></div>'),Fl=y('<img class="bg svelte-18ulxsm" alt="" draggable="false"/>'),Nl=yr('<line class="wire svelte-18ulxsm" stroke-linecap="round" opacity="0.95"></line>'),ql=yr('<line class="wire svelte-18ulxsm" stroke-linecap="round" opacity="0.95"></line><circle class="wire svelte-18ulxsm" opacity="0.95"></circle>',1),Dl=yr('<circle class="point left-point svelte-18ulxsm" stroke="rgba(255,255,255,0.5)" stroke-width="0.5"></circle>'),Bl=yr('<circle class="point right-point svelte-18ulxsm" stroke="rgba(255,255,255,0.5)" stroke-width="0.5"></circle>'),Hl=yr('<circle class="hit svelte-18ulxsm"></circle>'),Gl=yr('<circle class="target svelte-18ulxsm"></circle>'),Wl=y('<div class="stage svelte-18ulxsm"><!> <svg class="wires svelte-18ulxsm" viewBox="0 0 100 100" preserveAspectRatio="none"><!><!><!><!><!><!></svg></div>'),Yl=y('<div class="root svelte-18ulxsm"><!></div>');function Ul(t,n){$t(n,!1);const r=_(),a=_(),o=_(),i=_(),l=_();let f=Yt(n,"data",8);const u=gn(),c=3,h=1.6,v=5,p=5,m=2.3,x=-2,R=4,T=.4,$=[{type:"scene",image:"./game/story/enter_bus.png",speaker:"Driver",text:"Sorry, kidâ€¦ the bus is stuck. The wires are fried and I can't get it running. Everyone will have to walk today."},{type:"scene",image:"./game/story/driver_sad.png",speaker:"",text:"The driver slumps in the cabin, staring at the dashboard like it personally betrayed him."},{type:"scene",image:"./game/story/lina_help.png",speaker:"Lina",text:"Don't worry. I can fix it. Just tell me which wires go together."},{type:"scene",image:"./game/story/broken_wires.png",speaker:"",text:"The wiring panel is open. Connect the matching colors to restore power.",sound:"broken"},{type:"task"},{type:"scene",image:"./game/story/fixed_wires.png",speaker:"",text:"Click. Click. The connections hold. The bus hums back to life."},{type:"scene",image:"./game/story/driver_happy.png",speaker:"Driver",text:"You actually did it! Alright everyone, back on the bus. Next stop: school!"}];let F=_(0),O=_("story"),X=_(!1),H=_(null),Q=_(!1),B=_(!1),U=_(!1);function K(){if(e(O)==="task")return;if(s(U,!1),e(F)<$.length-1&&Mr(F),$[e(F)]?.type==="task"){s(O,"task"),Ne();return}e(O)==="after"&&e(F)===$.length-1&&me()}function le(){if(e(O)==="story"){const M=$.findIndex(Y=>Y.type==="task");M>=0&&(s(F,M),s(O,"task"),Ne());return}e(O)==="after"&&(s(F,$.length-1),me())}function me(){e(X)||(s(X,!0),e(H)&&(e(H).pause(),s(H,null)),u("complete"))}function ne(M){const Y=e(o)?.[M];if(!Y)return null;try{const ue=new Audio(Y);M==="music"?(ue.loop=!0,ue.volume=.5,e(H)&&e(H).pause(),s(H,ue)):ue.volume=.7;const ye=ue.play();return ye&&ye.catch(()=>{}),ue}catch{return null}}function Me(){!e(B)&&e(o)?.music&&(s(B,!0),ne("music"))}function Le(){e(Q)||(s(Q,!0),Me())}let G=_(),ge=_(),C={left:0,top:0,width:1,height:1},A={left:0,top:0,width:1,height:1};const N=["yellow","red","blue"],W=["red","blue","yellow"];let q=_([]),_e=_([]);const be=22,Re=78,Ae=[12,20,28],Fe=1920;function Je(){if(!e(G))return;const M=C.width;let Y=be,ue=Re;if(M>Fe){const ye=M-Fe,ve=Math.min(10,ye/100);Y=be-ve,ue=Re+ve}s(q,N.map((ye,ve)=>({color:ye,x:Y+m,y:Ae[ve]}))),s(_e,W.map((ye,ve)=>({color:ye,x:ue+x,y:Ae[ve]})))}function Ne(){if(!e(G))return;const M=e(G).getBoundingClientRect();if(C={left:M.left,top:M.top,width:M.width||1,height:M.height||1},!e(ge)){A={left:C.left,top:C.top,width:C.width,height:C.height},Je();return}const Y=e(ge).naturalWidth||1,ue=e(ge).naturalHeight||1,ye=C.width,ve=C.height,Ce=Math.min(ye/Y,ve/ue),$e=Y*Ce,Oe=ue*Ce,qe=(ye-$e)/2,Pe=(ve-Oe)/2;A={left:C.left+qe,top:C.top+Pe,width:$e,height:Oe},Je()}function Qe(){Ne()}function ae(M,Y,ue){return Math.max(Y,Math.min(ue,M))}function z(M){Ne();const Y=(M.clientX-A.left)/A.width,ue=(M.clientY-A.top)/A.height;return{x:ae(Y*100,0,100),y:ae(ue*100,0,100)}}function ee(M,Y){const ue=M.x-Y.x,ye=M.y-Y.y;return ue*ue+ye*ye}function de(M){return e(q).find(Y=>Y.color===M)}function he(M){return e(_e).find(Y=>Y.color===M)}let j=_(new Set),P=_(null);function xe(){s(j,new Set),s(P,null)}function ce(M,Y){if(e(O)!=="task"||e(j).has(M))return;const ue=de(M);if(!ue)return;const ye=z(Y);s(P,{color:M,x1:ue.x,y1:ue.y,x2:ye.x,y2:ye.y}),Le();try{Y.currentTarget?.setPointerCapture?.(Y.pointerId)}catch{}}function ke(M){if(e(O)!=="task"||!e(P))return;const Y=z(M);s(P,{...e(P),x2:Y.x,y2:Y.y})}function ze(M){if(e(O)!=="task"||!e(P))return;const Y=z(M),ue=he(e(P).color);if(!ue){s(P,null);return}ee(Y,ue)<=p*p?(e(j).add(e(P).color),s(j,new Set(e(j))),ne("connect"),s(P,null),e(j).size===N.length&&(ne("success"),s(O,"after"),s(F,Math.min(e(F)+1,$.length-1)))):(s(P,null),ne("fail"),u("mistake",{penalty:e(l)}))}let Ee=_(null);fn(()=>{Ne(),window.addEventListener("resize",Ne);const M=()=>{Le()};document.addEventListener("click",M,{once:!0}),document.addEventListener("touchstart",M,{once:!0}),document.addEventListener("keydown",M,{once:!0})}),On(()=>{e(H)&&(e(H).pause(),s(H,null)),window.removeEventListener("resize",Ne)}),ie(()=>dt(f()),()=>{s(r,f()?.config??{})}),ie(()=>e(r),()=>{s(a,e(r)?.background??"")}),ie(()=>e(r),()=>{s(o,e(r)?.sounds??{})}),ie(()=>e(r),()=>{s(i,e(r)?.rules??{})}),ie(()=>e(i),()=>{s(l,Number(e(i)?.mistakePenaltyHearts??1))}),ie(()=>(dt(f()),e(Ee),e(H)),()=>{f()?.id&&f().id!==e(Ee)&&(s(Ee,f().id),s(F,0),s(O,"story"),s(X,!1),xe(),s(U,!1),s(Q,!1),s(B,!1),e(H)&&(e(H).pause(),s(H,null)))}),ie(()=>(e(O),e(F),e(U)),()=>{e(O)==="story"&&e(F)===3&&!e(U)&&$[e(F)]?.sound==="broken"&&setTimeout(()=>{ne("broken"),s(U,!0)},300)}),dn(),Rt();var et=Yl(),Lt=d(et);{var gt=M=>{const Y=Jt(()=>(e(F),w(()=>$[e(F)]))),ue=Jt(()=>(dt(e(Y)),e(a),w(()=>e(Y)?.image||e(a))));var ye=Rl(),ve=d(ye);{var Ce=J=>{var Se=Ol();L(()=>D(Se,"src",e(ue))),g(J,Se)},$e=J=>{var Se=Pl();g(J,Se)};I(ve,J=>{e(ue)?J(Ce):J($e,!1)})}var Oe=b(ve,2),qe=d(Oe);{var Pe=J=>{var Se=jl(),De=d(Se);L(()=>Z(De,(dt(e(Y)),w(()=>e(Y).speaker)))),g(J,Se)};I(qe,J=>{dt(e(Y)),w(()=>e(Y)?.speaker)&&J(Pe)})}var Ye=b(qe,2),rt=d(Ye),ut=b(Ye,2),kt=d(ut),re=b(kt,2),se=d(re);L(()=>{Z(rt,(dt(e(Y)),w(()=>e(Y)?.text??""))),Z(se,(e(F),w(()=>e(F)<$.length-1?"Next":"Finish")))}),E("click",kt,le),E("click",re,K),E("click",ye,Le),E("keydown",ye,J=>J.key==="Enter"||J.key===" "?Le():null),g(M,ye)},te=M=>{var Y=Wl(),ue=d(Y);{var ye=re=>{var se=Fl();Xn(se,J=>s(ge,J),()=>e(ge)),L(()=>D(se,"src",e(a))),E("load",se,Qe),g(re,se)};I(ue,re=>{e(a)&&re(ye)})}var ve=b(ue,2),Ce=d(ve);it(Ce,1,()=>N,re=>re,(re,se)=>{var J=Ie(),Se=oe(J);{var De=Be=>{const pt=Jt(()=>(e(se),w(()=>de(e(se))))),ht=Jt(()=>(e(se),w(()=>he(e(se)))));var Tt=Ie(),At=oe(Tt);{var Bt=k=>{var S=Nl();D(S,"stroke-width",c),L(()=>{D(S,"x1",(dt(e(pt)),w(()=>e(pt).x))),D(S,"y1",(dt(e(pt)),w(()=>e(pt).y))),D(S,"x2",(dt(e(ht)),w(()=>e(ht).x))),D(S,"y2",(dt(e(ht)),w(()=>e(ht).y))),D(S,"stroke",e(se))}),g(k,S)};I(At,k=>{e(pt)&&e(ht)&&k(Bt)})}g(Be,Tt)};I(Se,Be=>{e(j),e(se),w(()=>e(j).has(e(se)))&&Be(De)})}g(re,J)});var $e=b(Ce);{var Oe=re=>{var se=ql(),J=oe(se);D(J,"stroke-width",c);var Se=b(J);D(Se,"r",h),L(()=>{D(J,"x1",(e(P),w(()=>e(P).x1))),D(J,"y1",(e(P),w(()=>e(P).y1))),D(J,"x2",(e(P),w(()=>e(P).x2))),D(J,"y2",(e(P),w(()=>e(P).y2))),D(J,"stroke",(e(P),w(()=>e(P).color))),D(Se,"cx",(e(P),w(()=>e(P).x2))),D(Se,"cy",(e(P),w(()=>e(P).y2))),D(Se,"fill",(e(P),w(()=>e(P).color)))}),g(re,se)};I($e,re=>{e(P)&&re(Oe)})}var qe=b($e);{var Pe=re=>{var se=Ie(),J=oe(se);it(J,1,()=>e(q),Se=>Se.color,(Se,De)=>{var Be=Dl();D(Be,"r",R),D(Be,"opacity",T),L(()=>{D(Be,"cx",(e(De),w(()=>e(De).x))),D(Be,"cy",(e(De),w(()=>e(De).y))),D(Be,"fill",(e(De),w(()=>e(De).color)))}),g(Se,Be)}),g(re,se)};I(qe,re=>{re(Pe)})}var Ye=b(qe);{var rt=re=>{var se=Ie(),J=oe(se);it(J,1,()=>e(_e),Se=>Se.color,(Se,De)=>{var Be=Bl();D(Be,"r",R),D(Be,"opacity",T),L(()=>{D(Be,"cx",(e(De),w(()=>e(De).x))),D(Be,"cy",(e(De),w(()=>e(De).y))),D(Be,"fill",(e(De),w(()=>e(De).color)))}),g(Se,Be)}),g(re,se)};I(Ye,re=>{re(rt)})}var ut=b(Ye);it(ut,1,()=>e(q),re=>re.color,(re,se)=>{var J=Hl();D(J,"r",v),D(J,"fill","transparent"),L(()=>{D(J,"cx",(e(se),w(()=>e(se).x))),D(J,"cy",(e(se),w(()=>e(se).y)))}),E("pointerdown",J,Se=>ce(e(se).color,Se)),g(re,J)});var kt=b(ut);it(kt,1,()=>e(_e),re=>re.color,(re,se)=>{var J=Gl();D(J,"r",p),D(J,"fill","transparent"),L(()=>{D(J,"cx",(e(se),w(()=>e(se).x))),D(J,"cy",(e(se),w(()=>e(se).y)))}),g(re,J)}),Xn(Y,re=>s(G,re),()=>e(G)),E("pointermove",Y,ke),E("pointerup",Y,ze),g(M,Y)};I(Lt,M=>{e(O)!=="task"?M(gt):M(te,!1)})}g(t,et),Mt()}var Vl=y('<div class="text-overlay svelte-2g4xj8"><div class="text-bubble svelte-2g4xj8"><p class="svelte-2g4xj8"> </p></div></div>'),Xl=y('<div class="text-overlay svelte-2g4xj8"><div class="text-bubble svelte-2g4xj8"><p class="svelte-2g4xj8"> </p></div></div>'),Kl=y('<div class="text-overlay svelte-2g4xj8"><div class="text-bubble svelte-2g4xj8"><p class="svelte-2g4xj8"> </p></div></div>'),Zl=y('<div class="terminal-screen svelte-2g4xj8"><img src="./game/backgrounds/terminal_in_bus.png" class="bg svelte-2g4xj8" alt="Terminal"/> <!> <!> <!></div>'),Jl=y('<div class="incoming-screen svelte-2g4xj8"><img src="./game/backgrounds/incoming.png" class="bg svelte-2g4xj8" alt="Incoming Call"/></div>'),Ql=y('<div class="message-screen svelte-2g4xj8"><img src="./game/backgrounds/message1.png" class="bg svelte-2g4xj8" alt="Message 1"/></div>'),ec=y('<div class="message-screen svelte-2g4xj8"><img src="./game/backgrounds/message2.png" class="bg svelte-2g4xj8" alt="Message 2"/></div>'),tc=y('<div class="message-screen svelte-2g4xj8"><img src="./game/backgrounds/message3.png" class="bg svelte-2g4xj8" alt="Message 3"/></div>'),nc=y('<div class="message-screen svelte-2g4xj8"><img src="./game/backgrounds/message4.png" class="bg svelte-2g4xj8" alt="Message 4"/></div>'),rc=y('<div class="message-screen svelte-2g4xj8"><img src="./game/backgrounds/message5.png" class="bg svelte-2g4xj8" alt="Message 5"/></div>'),ac=y('<span class="password-char svelte-2g4xj8"> </span>'),sc=y('<span class="password-char empty svelte-2g4xj8">_</span>'),ic=y('<button class="key svelte-2g4xj8"> </button>'),oc=y('<div class="keyboard-row svelte-2g4xj8"></div>'),lc=y('<div class="password-screen svelte-2g4xj8"><div class="password-content svelte-2g4xj8"><div class="password-display svelte-2g4xj8"><div class="password-input-field svelte-2g4xj8"><!> <!></div> <div class="timer svelte-2g4xj8"> </div></div> <div class="keyboard-container svelte-2g4xj8"><div class="keyboard svelte-2g4xj8"><!> <div class="keyboard-row svelte-2g4xj8"><button class="key key-wide svelte-2g4xj8">âŒ«</button> <button class="key key-wide svelte-2g4xj8">ENTER</button></div></div></div></div></div>'),cc=y(`<div class="error-overlay svelte-2g4xj8"><div class="error-message svelte-2g4xj8"><p class="svelte-2g4xj8">Wrong password!</p> <p class="svelte-2g4xj8">Let's start the level again</p></div></div>`),uc=y('<div class="level-container svelte-2g4xj8"><!> <!></div>');function vc(t,n){$t(n,!1);const r=()=>wt(cn,"$hearts",a),[a,o]=In(),i=_();let l=Yt(n,"data",8);const f=gn(),u=["8XGHC4","WO78QC","LCXHG2"];let c=_(0),h=_(""),v=_(12),p=null,m=_(!1),x=_("terminal"),R=_(""),T="Need to pay the fare.",$=0,F=_(!1),O=_(""),X="Lina takes out her card to pay and tries to tap it on the terminal",H=0,Q=_(!1),B=_(""),U="Oh no, it's asking for a password.",K=0,le=_(!1),me=null,ne=null;function Me(){if(document.querySelectorAll("audio").forEach(z=>{z.pause(),z.currentTime=0}),ne){try{ne.pause(),ne.currentTime=0}catch{}ne=null}if(typeof window<"u"&&window._passwordMusicSound){try{window._passwordMusicSound.pause(),window._passwordMusicSound.currentTime=0}catch{}window._passwordMusicSound=null}if(me){try{me.pause(),me.currentTime=0}catch{}me=null}}function Le(){$<T.length?(s(R,T.substring(0,$+1)),$++,setTimeout(Le,30)):(s(F,!0),setTimeout(()=>{s(x,"text2"),setTimeout(()=>{G()},500)},5e3))}function G(){H<X.length?(s(O,X.substring(0,H+1)),H++,setTimeout(G,30)):(s(Q,!0),setTimeout(()=>{s(x,"text3"),setTimeout(()=>{ge()},500)},5e3))}function ge(){K<U.length?(s(B,U.substring(0,K+1)),K++,setTimeout(ge,30)):(s(le,!0),setTimeout(()=>{s(x,"incoming"),me=new Audio("./game/sfx/ringtone.wav"),me.play().catch(()=>{}),setTimeout(()=>{s(x,"message1"),C("./game/sfx/msg.wav"),setTimeout(()=>{s(x,"message2"),C("./game/sfx/msg.wav"),ne=new Audio("./game/sfx/passwordmusic.wav"),ne.loop=!0,ne.volume=.7,typeof window<"u"&&(window._passwordMusicSound=ne),ne.play().catch(()=>{}),setTimeout(()=>{s(x,"password2"),W()},6e3)},5e3)},5500)},5e3))}function C(ae){if(!ae)return;const z=new Audio(ae);return z.play().catch(()=>{}),z}function A(){if(s(c,0),s(h,""),s(v,12),s(m,!1),p&&(clearInterval(p),p=null),ne&&(ne.pause(),ne=null),me){try{me.pause(),me.currentTime=0}catch{}me=null}if(typeof window<"u"&&window._passwordMusicSound){try{window._passwordMusicSound.pause(),window._passwordMusicSound.currentTime=0}catch{}window._passwordMusicSound=null}s(x,"message1"),C("./game/sfx/msg.wav"),setTimeout(()=>{s(x,"message2"),C("./game/sfx/msg.wav"),ne=new Audio("./game/sfx/passwordmusic.wav"),ne.loop=!0,ne.volume=.7,typeof window<"u"&&(window._passwordMusicSound=ne),ne.play().catch(()=>{}),setTimeout(()=>{s(x,"password2"),W()},6e3)},5e3)}function N(){const ae=r();if(C("./game/sfx/fail.wav"),f("mistake"),p&&(clearInterval(p),p=null),ne&&(ne.pause(),ne=null),me){try{me.pause(),me.currentTime=0}catch{}me=null}ae>1&&(s(m,!0),setTimeout(()=>{A()},3e3))}function W(){s(h,""),s(v,12),p&&(clearInterval(p),p=null),p=setInterval(()=>{Mr(v,-1),e(v)<=0&&(clearInterval(p),p=null,N())},1e3)}function q(){e(h)===u[e(c)]?(C("./game/sfx/success.wav"),Mr(c),s(h,""),p&&(clearInterval(p),p=null),e(c)>=u.length?(C("./game/sfx/joy.wav"),setTimeout(()=>{s(x,"message5"),C("./game/sfx/msg.wav"),setTimeout(()=>{f("complete")},5e3)},1e3)):setTimeout(()=>{e(c)===1?(s(x,"message3"),C("./game/sfx/msg.wav"),setTimeout(()=>{s(x,"password3"),W()},6e3)):e(c)===2&&(s(x,"message4"),C("./game/sfx/msg.wav"),setTimeout(()=>{s(x,"password4"),W()},6e3))},500)):e(h).length>=u[e(c)].length&&N()}function _e(ae){e(m)||(ae==="BACKSPACE"?s(h,e(h).slice(0,-1)):ae==="ENTER"?q():(s(h,e(h)+ae),e(h).length===u[e(c)].length&&setTimeout(()=>{q()},200)))}const be=[["1","2","3","4","5","6","7","8","9","0"],["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Z","X","C","V","B","N","M"]];fn(()=>{Me(),setTimeout(()=>{s(x,"text1"),Le()},1e3)}),On(()=>{Me(),p&&(clearInterval(p),p=null)}),ie(()=>dt(l()),()=>{l()}),ie(()=>(e(c),e(h)),()=>{s(i,u[e(c)]?Array.from({length:u[e(c)].length-e(h).length}):[])}),dn(),Rt();var Re=uc(),Ae=d(Re);{var Fe=ae=>{var z=Zl(),ee=b(d(z),2);{var de=ce=>{var ke=Vl(),ze=d(ke),Ee=d(ze),et=d(Ee);L(()=>Z(et,e(R))),g(ce,ke)};I(ee,ce=>{(e(x)==="text1"||e(F))&&ce(de)})}var he=b(ee,2);{var j=ce=>{var ke=Xl(),ze=d(ke),Ee=d(ze),et=d(Ee);L(()=>Z(et,e(O))),g(ce,ke)};I(he,ce=>{(e(x)==="text2"||e(Q))&&ce(j)})}var P=b(he,2);{var xe=ce=>{var ke=Kl(),ze=d(ke),Ee=d(ze),et=d(Ee);L(()=>Z(et,e(B))),g(ce,ke)};I(P,ce=>{(e(x)==="text3"||e(le))&&ce(xe)})}g(ae,z)},Je=ae=>{var z=Ie(),ee=oe(z);{var de=j=>{var P=Jl();g(j,P)},he=j=>{var P=Ie(),xe=oe(P);{var ce=ze=>{var Ee=Ql();g(ze,Ee)},ke=ze=>{var Ee=Ie(),et=oe(Ee);{var Lt=te=>{var M=ec();g(te,M)},gt=te=>{var M=Ie(),Y=oe(M);{var ue=ve=>{var Ce=tc();g(ve,Ce)},ye=ve=>{var Ce=Ie(),$e=oe(Ce);{var Oe=Pe=>{var Ye=nc();g(Pe,Ye)},qe=Pe=>{var Ye=Ie(),rt=oe(Ye);{var ut=re=>{var se=rc();g(re,se)},kt=re=>{var se=Ie(),J=oe(se);{var Se=De=>{var Be=lc(),pt=d(Be),ht=d(pt),Tt=d(ht),At=d(Tt);it(At,1,()=>(e(h),w(()=>e(h).split(""))),xt,(bt,lt)=>{var He=ac(),Ke=d(He);L(()=>Z(Ke,e(lt))),g(bt,He)});var Bt=b(At,2);it(Bt,1,()=>e(i),xt,(bt,lt)=>{var He=sc();g(bt,He)});var k=b(Tt,2),S=d(k),V=b(ht,2),we=d(V),We=d(we);it(We,1,()=>be,xt,(bt,lt)=>{var He=oc();it(He,5,()=>e(lt),xt,(Ke,Ht)=>{var pn=ic(),Jn=d(pn);L(()=>Z(Jn,e(Ht))),E("click",pn,()=>_e(e(Ht))),g(Ke,pn)}),g(bt,He)});var Xe=b(We,2),Ue=d(Xe),ft=b(Ue,2);L(()=>Z(S,`Time: ${e(v)??""}s`)),E("click",Ue,()=>_e("BACKSPACE")),E("click",ft,()=>_e("ENTER")),g(De,Be)};I(J,De=>{(e(x)==="password2"||e(x)==="password3"||e(x)==="password4")&&De(Se)},!0)}g(re,se)};I(rt,re=>{e(x)==="message5"?re(ut):re(kt,!1)},!0)}g(Pe,Ye)};I($e,Pe=>{e(x)==="message4"?Pe(Oe):Pe(qe,!1)},!0)}g(ve,Ce)};I(Y,ve=>{e(x)==="message3"?ve(ue):ve(ye,!1)},!0)}g(te,M)};I(et,te=>{e(x)==="message2"?te(Lt):te(gt,!1)},!0)}g(ze,Ee)};I(xe,ze=>{e(x)==="message1"?ze(ce):ze(ke,!1)},!0)}g(j,P)};I(ee,j=>{e(x)==="incoming"?j(de):j(he,!1)},!0)}g(ae,z)};I(Ae,ae=>{e(x)==="terminal"||e(x)==="text1"||e(x)==="text2"||e(x)==="text3"?ae(Fe):ae(Je,!1)})}var Ne=b(Ae,2);{var Qe=ae=>{var z=cc();g(ae,z)};I(Ne,ae=>{e(m)&&ae(Qe)})}g(t,Re),Mt(),o()}var dc=y('<img class="novel-image svelte-1byhulz" alt="" draggable="false"/>'),fc=y('<div class="speaker-name svelte-1byhulz"> </div>'),gc=y('<div class="novel-screen svelte-1byhulz"><!> <div class="dialogue-box svelte-1byhulz"><!> <div class="dialogue-text svelte-1byhulz"> </div> <div class="dialogue-actions svelte-1byhulz"><button class="action-btn skip-btn svelte-1byhulz">Skip</button> <button class="action-btn next-btn svelte-1byhulz"> </button></div></div></div>'),pc=y('<img class="game-background svelte-1byhulz" alt="" draggable="false"/>'),hc=y('<div class="warning-message svelte-1byhulz"> </div>'),mc=y('<img draggable="false" class="svelte-1byhulz"/>'),_c=y('<div class="game-screen svelte-1byhulz"><!> <div class="game-content svelte-1byhulz"><div class="traffic-light-container svelte-1byhulz"><div class="traffic-light svelte-1byhulz"><div></div> <div></div> <div></div></div></div> <!> <button class="action-button svelte-1byhulz"><!></button></div></div>'),bc=y('<div class="game-container svelte-1byhulz"><!></div>');function yc(t,n){$t(n,!1);let r=Yt(n,"data",8);const a=gn();let o=_(),i=_(),l=_(),f=_(),u=_(),c=_(),h=_();const v=[{type:"scene",image:"./game/story/cross_road_1.png",speaker:"Lina",text:"Yay! I finally arrived at school!"},{type:"scene",image:"./game/story/cross_road_2.png",speaker:"Lina",text:"Can you help me cross the road safely?"},{type:"task"},{type:"scene",image:"./game/story/cross_road_4.png",speaker:"Lina",text:"Thank you! Thanks to you, I got to school safely."}];let p=_(0),m=_("story"),x=_(!1),R=0,T=_("red"),$=_(""),F=null,O=_(!0);function X(){if(e(m)==="task"||e(x))return;if(Mr(p),e(p)>=v.length){Q();return}v[e(p)].type==="task"&&(s(m,"task"),B())}function H(){e(m)==="story"&&(s(p,v.findIndex(N=>N.type==="task")),e(p)>=0&&(s(m,"task"),B()))}function Q(){e(x)||(s(x,!0),U(),a("complete"))}function B(){U(),R=0,s(T,e(i)[0]?.state||"red"),s(O,!0),K()}function U(){F&&(clearTimeout(F),F=null)}function K(){F&&clearTimeout(F);const N=e(i)[R]||e(i)[0];s(T,N.state||"red");const W=Math.max(300,N.durationMs||1e3);F=setTimeout(()=>{R=(R+1)%e(i).length,K()},W)}function le(N){const W=e(l)[N];if(W)try{const q=new Audio(W);q.volume=.8,q.play().catch(()=>{})}catch{}}function me(N){s($,N||"Wait!"),le("warning"),setTimeout(()=>{s($,"")},800)}function ne(){s(O,!1),le("fail"),a("mistake",{penalty:1}),setTimeout(()=>{s(O,!0)},1e3)}function Me(){if(e(O)){if(e(T)==="green"){le("success"),s(O,!1),U(),s(m,"after"),s(p,v.findIndex(N=>N.image==="./game/story/cross_road_4.png")),e(p)<0&&s(p,v.length-1);return}if(e(T)==="yellow"){me(e(u)?.warningText||"Wait!");return}ne(),me("Wrong! -1 Heart")}}let Le=_(null);On(()=>{U()}),ie(()=>(e(o),dt(r())),()=>{s(o,r()?.config??{}),s(i,e(o)?.lights??[{state:"red",durationMs:2200},{state:"yellow",durationMs:900},{state:"green",durationMs:1600}]),s(l,e(o)?.sounds??{}),s(f,e(o)?.visuals??{}),s(u,e(o)?.rules??{}),s(c,e(o)?.button??{label:"GO"}),s(h,e(o)?.background??"")}),ie(()=>(dt(r()),e(Le)),()=>{r()?.id&&r().id!==e(Le)&&(s(Le,r().id),s(p,0),s(m,"story"),s(x,!1),s($,""),s(O,!0),U())}),dn(),Rt();var G=bc(),ge=d(G);{var C=N=>{const W=Jt(()=>(e(p),w(()=>v[e(p)]))),q=Jt(()=>(dt(e(W)),e(h),w(()=>e(W)?.image||e(h))));var _e=gc(),be=d(_e);{var Re=he=>{var j=dc();L(()=>D(j,"src",e(q))),g(he,j)};I(be,he=>{e(q)&&he(Re)})}var Ae=b(be,2),Fe=d(Ae);{var Je=he=>{var j=fc(),P=d(j);L(()=>Z(P,(dt(e(W)),w(()=>e(W).speaker)))),g(he,j)};I(Fe,he=>{dt(e(W)),w(()=>e(W)?.speaker)&&he(Je)})}var Ne=b(Fe,2),Qe=d(Ne),ae=b(Ne,2),z=d(ae),ee=b(z,2),de=d(ee);L(()=>{Z(Qe,(dt(e(W)),w(()=>e(W)?.text||""))),Z(de,(e(p),w(()=>e(p)<v.length-1?"Next":"Finish")))}),E("click",z,H),E("click",ee,X),g(N,_e)},A=N=>{var W=_c(),q=d(W);{var _e=j=>{var P=pc();L(()=>D(P,"src",e(h))),g(j,P)};I(q,j=>{e(h)&&j(_e)})}var be=b(q,2),Re=d(be),Ae=d(Re),Fe=d(Ae),Je=b(Fe,2),Ne=b(Je,2),Qe=b(Re,2);{var ae=j=>{var P=hc(),xe=d(P);L(()=>Z(xe,e($))),g(j,P)};I(Qe,j=>{e($)&&j(ae)})}var z=b(Qe,2),ee=d(z);{var de=j=>{var P=mc();L(()=>{D(P,"src",(e(c),w(()=>e(c).image))),D(P,"alt",(e(c),w(()=>e(c).label)))}),g(j,P)},he=j=>{var P=Xi();L(()=>Z(P,(e(c),w(()=>e(c).label)))),g(j,P)};I(ee,j=>{e(c),w(()=>e(c)?.image)?j(de):j(he,!1)})}L(()=>{Gn(Fe,1,`light red ${e(T)==="red"?"active":""}`,"svelte-1byhulz"),Gn(Je,1,`light yellow ${e(T)==="yellow"?"active":""}`,"svelte-1byhulz"),Gn(Ne,1,`light green ${e(T)==="green"?"active":""}`,"svelte-1byhulz"),z.disabled=!e(O)}),E("click",z,Me),g(N,W)};I(ge,N=>{e(m)==="story"||e(m)==="after"?N(C):N(A,!1)})}g(t,G),Mt()}var wc=y('<button class="continue-btn svelte-1a0488i">Continue</button>'),xc=y('<div class="dialog-box svelte-1a0488i"><p class="dialog-text svelte-1a0488i"> <span class="cursor svelte-1a0488i">|</span></p> <!></div>'),kc=y('<button class="continue-btn svelte-1a0488i">Continue</button>'),Tc=y('<div class="dialog-box svelte-1a0488i"><p class="dialog-text svelte-1a0488i"> <span class="cursor svelte-1a0488i">|</span></p> <!></div>'),Sc=y('<div class="intro-scene svelte-1a0488i"><img src="./game/backgrounds/school.png" class="intro-bg svelte-1a0488i" alt="School"/> <img src="./game/characters/Michael/base.png" class="michael-character svelte-1a0488i" alt="Michael"/> <!></div>'),Ic=y('<button class="continue-btn svelte-1a0488i">OK</button>'),zc=y('<div class="intro-scene svelte-1a0488i"><img src="./game/backgrounds/school.png" class="intro-bg svelte-1a0488i" alt="School"/> <img src="./game/characters/Michael/happy.png" class="michael-character svelte-1a0488i" alt="Michael"/> <div class="dialog-box svelte-1a0488i"><p class="dialog-text svelte-1a0488i"> <span class="cursor svelte-1a0488i">|</span></p> <!></div></div>'),Ec=y('<button class="continue-btn continue-btn-pink svelte-1a0488i">Go to school</button>'),$c=y('<div class="intro-scene svelte-1a0488i"><img src="./game/backgrounds/school.png" class="intro-bg svelte-1a0488i" alt="School"/> <img src="./game/characters/Lina/suit/happy.png" class="lina-character svelte-1a0488i" alt="Lina"/> <div class="dialog-box dialog-box-pink svelte-1a0488i"><p class="dialog-text svelte-1a0488i"> <span class="cursor svelte-1a0488i">|</span></p> <!></div></div>'),Mc=y('<button class="continue-btn continue-btn-pink svelte-1a0488i"> </button>'),Cc=y('<div class="dialog-box dialog-box-pink svelte-1a0488i"><p class="dialog-text svelte-1a0488i"> <span class="cursor svelte-1a0488i">|</span></p> <!></div>'),Lc=y('<button class="continue-btn svelte-1a0488i"> </button>'),Ac=y('<div class="dialog-box svelte-1a0488i"><p class="dialog-text svelte-1a0488i"> <span class="cursor svelte-1a0488i">|</span></p> <!></div>'),Oc=y('<button class="continue-btn continue-btn-teacher svelte-1a0488i"> </button>'),Pc=y('<div class="dialog-box dialog-box-teacher svelte-1a0488i"><p class="dialog-text svelte-1a0488i"> <span class="cursor svelte-1a0488i">|</span></p> <!></div>'),jc=y('<button class="continue-btn continue-btn-classmates svelte-1a0488i"> </button>'),Rc=y('<div class="dialog-box dialog-box-classmates svelte-1a0488i"><p class="dialog-text svelte-1a0488i"> <span class="cursor svelte-1a0488i">|</span></p> <!></div>'),Fc=y('<div class="final-novel-scene svelte-1a0488i"><img class="novel-bg svelte-1a0488i"/> <!></div>'),Nc=y('<button><div class="card-inner svelte-1a0488i"><div class="card-front svelte-1a0488i"><img alt="item" class="svelte-1a0488i"/></div> <div class="card-back svelte-1a0488i"><img alt="card back" class="svelte-1a0488i"/></div></div></button>'),qc=y('<div class="memory-level svelte-1a0488i"><div class="grid-container svelte-1a0488i"></div></div>');function Dc(t,n){$t(n,!1);const r=()=>wt(Cn,"$gameTimer",a),[a,o]=In(),i=gn(),l=["./game/items/cardbanana.png","./game/items/cardtennis.png","./game/items/cardball.png"],f="./game/items/cardback.png";let u=_([]),c=[],h=0,v=!1,p=_("intro"),m=null,x=null,R=_(""),T="Hi! My name is Michael. You're late. The lesson is about to start. And I already know where we need to go",$=0,F=_(!1),O=_(""),X="If you win the game against me, I'll show you where the classroom is.",H=0,Q=_(!1),B=_(""),U="You did great. You handled it quickly. Oh, and here's the bell. Let's hurry up",K=0,le=_(!1),me=_(""),ne="Hooray! I'll finally get to class. And Michael is a nice boy. Maybe we'll become friends...",Me=0,Le=_(!1),G=_(1),ge=["./game/end/scene_1.png","./game/end/scene_2.png","./game/end/scene_3.png","./game/end/scene_4.png","./game/end/scene_5.png","./game/end/scene_6.png"],C=[{character:"girl",text:"So, where do we go now?"},{character:"boy",text:"It's right here, very close."},{character:"boy",text:"Look, everyone is already waiting for us."},{character:"girl",text:"Oh no, I'm scared. Why don't you go in first and I'll catch up with you?"},{character:"teacher",text:"Hello! We've been waiting for you. Come to the board and introduce yourself to your classmates."},{character:"girl",text:"Hi everyone! My name is Lina, I'm 8 years old. I'm very happy to meet all of you and I hope we can become good friends."},{character:"classmates",text:"Lina, you're awesome! Of course we'll be friends with you!"},{character:"girl",text:"Well, thank you for helping me get ready and get to school ."}],A=_(""),N=0,W=_(!1),q=_(0),_e=null,be=null,Re=null;function Ae(){if(document.querySelectorAll("audio").forEach(M=>{M.pause(),M.currentTime=0}),m){try{m.pause(),m.currentTime=0}catch{}m=null}if(_e){try{_e.pause(),_e.currentTime=0}catch{}_e=null}if(x){try{x.pause(),x.currentTime=0}catch{}x=null}if(be){try{be.pause(),be.currentTime=0}catch{}be=null}if(Re){try{Re.pause(),Re.currentTime=0}catch{}Re=null}if(typeof window<"u"&&window._passwordMusicSound)try{window._passwordMusicSound.pause(),window._passwordMusicSound.currentTime=0,window._passwordMusicSound=null}catch{}}fn(()=>{Ae(),Fe()}),On(()=>{Ae()});function Fe(){m=new Audio("./game/sfx/birdnature.wav"),m.loop=!0,m.play().catch(()=>{}),setTimeout(()=>{Je()},500)}function Je(){$<T.length?(s(R,T.substring(0,$+1)),$++,setTimeout(Je,30)):s(F,!0)}function Ne(){H<X.length?(s(O,X.substring(0,H+1)),H++,setTimeout(Ne,30)):s(Q,!0)}function Qe(){e(p)==="intro"?(s(p,"dialog2"),s(R,""),$=0,s(F,!1),setTimeout(()=>{Ne()},500)):e(p)==="dialog2"&&(s(p,"game"),ce(),ae())}function ae(){x=new Audio("./game/sfx/cardgamemusic.wav"),x.loop=!0,x.play().catch(()=>{})}function z(){m&&m.pause(),x&&(x.pause(),x=null),s(p,"michaelEnding"),be=new Audio("./game/sfx/bell.wav"),be.play().catch(()=>{}),setTimeout(()=>{ee()},500)}function ee(){K<U.length?(s(B,U.substring(0,K+1)),K++,setTimeout(ee,30)):s(le,!0)}function de(){s(p,"linaEnding"),s(B,""),K=0,s(le,!1),_e=new Audio("./game/sfx/joy.wav"),_e.play().catch(()=>{}),setTimeout(()=>{he()},500)}function he(){Me<ne.length?(s(me,ne.substring(0,Me+1)),Me++,setTimeout(he,30)):s(Le,!0)}function j(){s(p,"finalNovel"),s(G,1),s(q,0),s(A,""),N=0,s(W,!1),Re=new Audio("./game/sfx/classroom.wav"),Re.loop=!0,Re.play().catch(()=>{}),P()}function P(){N<C[e(q)].text.length?(s(A,C[e(q)].text.substring(0,N+1)),N++,setTimeout(P,30)):s(W,!0)}function xe(){e(q)<C.length-1?(Mr(q),s(A,""),N=0,s(W,!1),e(q)===2?s(G,2):e(q)===4?s(G,3):e(q)===5?s(G,4):e(q)===6?s(G,5):e(q)===7&&s(G,6),P()):(da(r()),i("complete"),setTimeout(()=>{qr.set(!0)},100))}function ce(){let te=[...l,...l];te.sort(()=>Math.random()-.5),s(u,te.map((M,Y)=>({id:Y,icon:M,isFlipped:!1,isMatched:!1})))}function ke(te){if(v||te.isFlipped||te.isMatched)return;new Audio("./game/sfx/cardflip.wav").play().catch(()=>{}),te.isFlipped=!0,s(u,e(u)),c.push(te),c.length===2&&ze()}function ze(){v=!0;const[te,M]=c;te.icon===M.icon?setTimeout(()=>{te.isMatched=!0,M.isMatched=!0,c=[],v=!1,s(u,e(u)),h++,h===l.length&&setTimeout(()=>{z()},1e3)},500):setTimeout(()=>{te.isFlipped=!1,M.isFlipped=!1,c=[],v=!1,s(u,e(u))},1e3)}Rt();var Ee=Ie(),et=oe(Ee);{var Lt=te=>{var M=Sc(),Y=b(d(M),4);{var ue=ve=>{var Ce=xc(),$e=d(Ce),Oe=d($e),qe=b($e,2);{var Pe=Ye=>{var rt=wc();E("click",rt,Qe),g(Ye,rt)};I(qe,Ye=>{e(F)&&Ye(Pe)})}L(()=>Z(Oe,e(R))),g(ve,Ce)},ye=ve=>{var Ce=Ie(),$e=oe(Ce);{var Oe=qe=>{var Pe=Tc(),Ye=d(Pe),rt=d(Ye),ut=b(Ye,2);{var kt=re=>{var se=kc();E("click",se,Qe),g(re,se)};I(ut,re=>{e(Q)&&re(kt)})}L(()=>Z(rt,e(O))),g(qe,Pe)};I($e,qe=>{e(p)==="dialog2"&&qe(Oe)},!0)}g(ve,Ce)};I(Y,ve=>{e(p)==="intro"?ve(ue):ve(ye,!1)})}g(te,M)},gt=te=>{var M=Ie(),Y=oe(M);{var ue=ve=>{var Ce=zc(),$e=b(d(Ce),4),Oe=d($e),qe=d(Oe),Pe=b(Oe,2);{var Ye=rt=>{var ut=Ic();E("click",ut,de),g(rt,ut)};I(Pe,rt=>{e(le)&&rt(Ye)})}L(()=>Z(qe,e(B))),g(ve,Ce)},ye=ve=>{var Ce=Ie(),$e=oe(Ce);{var Oe=Pe=>{var Ye=$c(),rt=b(d(Ye),4),ut=d(rt),kt=d(ut),re=b(ut,2);{var se=J=>{var Se=Ec();E("click",Se,j),g(J,Se)};I(re,J=>{e(Le)&&J(se)})}L(()=>Z(kt,e(me))),g(Pe,Ye)},qe=Pe=>{var Ye=Ie(),rt=oe(Ye);{var ut=re=>{var se=Fc(),J=d(se),Se=b(J,2);{var De=pt=>{var ht=Cc(),Tt=d(ht),At=d(Tt),Bt=b(Tt,2);{var k=S=>{var V=Mc(),we=d(V);L(()=>Z(we,e(q)<C.length-1?"Continue":"Finish")),E("click",V,xe),g(S,V)};I(Bt,S=>{e(W)&&S(k)})}L(()=>Z(At,e(A))),g(pt,ht)},Be=pt=>{var ht=Ie(),Tt=oe(ht);{var At=k=>{var S=Ac(),V=d(S),we=d(V),We=b(V,2);{var Xe=Ue=>{var ft=Lc(),bt=d(ft);L(()=>Z(bt,e(q)<C.length-1?"Continue":"Finish")),E("click",ft,xe),g(Ue,ft)};I(We,Ue=>{e(W)&&Ue(Xe)})}L(()=>Z(we,e(A))),g(k,S)},Bt=k=>{var S=Ie(),V=oe(S);{var we=Xe=>{var Ue=Pc(),ft=d(Ue),bt=d(ft),lt=b(ft,2);{var He=Ke=>{var Ht=Oc(),pn=d(Ht);L(()=>Z(pn,e(q)<C.length-1?"Continue":"Finish")),E("click",Ht,xe),g(Ke,Ht)};I(lt,Ke=>{e(W)&&Ke(He)})}L(()=>Z(bt,e(A))),g(Xe,Ue)},We=Xe=>{var Ue=Ie(),ft=oe(Ue);{var bt=lt=>{var He=Rc(),Ke=d(He),Ht=d(Ke),pn=b(Ke,2);{var Jn=wr=>{var hn=jc(),xr=d(hn);L(()=>Z(xr,e(q)<C.length-1?"Continue":"Finish")),E("click",hn,xe),g(wr,hn)};I(pn,wr=>{e(W)&&wr(Jn)})}L(()=>Z(Ht,e(A))),g(lt,He)};I(ft,lt=>{C[e(q)].character==="classmates"&&lt(bt)},!0)}g(Xe,Ue)};I(V,Xe=>{C[e(q)].character==="teacher"?Xe(we):Xe(We,!1)},!0)}g(k,S)};I(Tt,k=>{C[e(q)].character==="boy"?k(At):k(Bt,!1)},!0)}g(pt,ht)};I(Se,pt=>{C[e(q)].character==="girl"?pt(De):pt(Be,!1)})}L(()=>{D(J,"src",ge[e(G)-1]),D(J,"alt",`Novel Scene ${e(G)??""}`)}),g(re,se)},kt=re=>{var se=qc(),J=d(se);it(J,5,()=>e(u),xt,(Se,De)=>{var Be=Nc();let pt;var ht=d(Be),Tt=d(ht),At=d(Tt),Bt=b(Tt,2),k=d(Bt);D(k,"src",f),L(()=>{pt=Gn(Be,1,"card svelte-1a0488i",null,pt,{flipped:e(De).isFlipped,matched:e(De).isMatched}),D(At,"src",e(De).icon)}),E("click",Be,()=>ke(e(De))),g(Se,Be)}),g(re,se)};I(rt,re=>{e(p)==="finalNovel"?re(ut):re(kt,!1)},!0)}g(Pe,Ye)};I($e,Pe=>{e(p)==="linaEnding"?Pe(Oe):Pe(qe,!1)},!0)}g(ve,Ce)};I(Y,ve=>{e(p)==="michaelEnding"?ve(ue):ve(ye,!1)},!0)}g(te,M)};I(et,te=>{e(p)==="intro"||e(p)==="dialog2"?te(Lt):te(gt,!1)})}g(t,Ee),Mt(),o()}const Bc={"drag-drop-sort":Oo,cooking:Go,"dress-up-iron":nl,maze:Al,"wires-connect":Ul,password:vc,"traffic-light":yc,memory:Dc};function Da(t){return Bc[t]||null}var Hc=y('<div class="hint-overlay svelte-1mivxmm"><div class="hint-window svelte-1mivxmm"><button class="close-button svelte-1mivxmm" aria-label="Close hint">Ã—</button> <div class="hint-content svelte-1mivxmm"> </div></div></div>'),Gc=y('<button class="hint-button svelte-1mivxmm" aria-label="Show hint">?</button> <!>',1);function Wc(t,n){let r=Yt(n,"hintText",8,"Text will be here."),a=_(!1);function o(){s(a,!e(a))}function i(){s(a,!1)}var l=Gc(),f=oe(l),u=b(f,2);{var c=h=>{var v=Hc(),p=d(v),m=d(p),x=b(m,2),R=d(x);L(()=>Z(R,r())),E("click",m,i),E("click",p,ka(function(T){Ss.call(this,n,T)})),E("click",v,i),g(h,v)};I(u,h=>{e(a)&&h(c)})}E("click",f,o),g(t,l)}var Yc=y('<div class="video-container svelte-1uj4u28"><video src="./game/backgrounds/scene.mp4" class="transition-video svelte-1uj4u28" playsinline=""></video></div>',2),Uc=y('<div class="instruction-overlay svelte-1uj4u28"><div class="instruction-window svelte-1uj4u28"><div class="instruction-content svelte-1uj4u28"> </div></div></div>'),Vc=y("<!> <!>",1);function Xc(t,n){$t(n,!1);let r=Yt(n,"instruction",8,"");const a=gn();let o=_(!0),i=_(!1),l=_(null);function f(){s(o,!1),s(i,!0),setTimeout(()=>{s(i,!1),a("complete")},4e3)}fn(()=>{e(l)&&(e(l).addEventListener("error",()=>{f()}),e(l).play().catch(()=>{f()}))}),On(()=>{e(l)&&(e(l).pause(),oa(l,e(l).currentTime=0))}),Rt();var u=Vc(),c=oe(u);{var h=m=>{var x=Yc(),R=d(x);R.muted=!0,Xn(R,T=>s(l,T),()=>e(l)),E("ended",R,f),g(m,x)};I(c,m=>{e(o)&&m(h)})}var v=b(c,2);{var p=m=>{var x=Uc(),R=d(x),T=d(R),$=d(T);L(()=>Z($,r())),g(m,x)};I(v,m=>{e(i)&&m(p)})}g(t,u),Mt()}const Kc={gameId:"school-day-journey",totalHearts:3,intro:{title:"First Day Adventures",music:"./game/sfx/calm_music.wav",slides:[{lines:["Welcome to 'First Day Adventures'!","A gentle journey designed for young hearts facing school for the very first time.","Join Lina as she discovers that with a little courage and preparation,","every new beginning can become a beautiful adventure.","Let's help children find confidence, calmness,","and excitement for their very first school day!"]},{image:"./game/intro/scene_1.png",lines:["Good morning!","Today is Lina's first day at school.","The sun is rising gently through the window...","Listen to the birds singing outside."]},{image:"./game/intro/scene_2.png",lines:["Zzz... Zzz...","Lina is still peacefully asleep.","Her soft breathing fills the cozy room.","But it's time to wake up for the big day ahead!"]},{image:"./game/intro/scene_3.png",lines:["Nature is already awake and ready!","Butterflies dance in the morning breeze,","birds sing their cheerful songs,","and the whole world welcomes this special day."]},{image:"./game/intro/scene_4.png",lines:["Yawn... Stretch...","Good morning, world!","Lina rubs her eyes and smiles,","remembering today's exciting adventure."]},{image:"./game/intro/scene_5.png",lines:["Quickly making her bed,","Lina prepares her room for the day.","Everything must be perfect","for this important first day of school!"]},{image:"./game/intro/scene_6.png",lines:["Yay! I'm so excited!","Today is my first day at school!","I'm a little nervous about catching the bus...","Can you help me get ready?"]}],startButton:"Help Lina Get Ready!"}},Zc=JSON.parse(`[{"id":"lvl_backpack","tier":1,"type":"drag-drop-sort","title":"Pack your Backpack","instruction":"For the first time, you will pack your school bag.","config":{"hint":"Try to take only the necessary items that you will need at school. New knowledge awaits you at school, and you will need to write it down. Also, don't forget to bring a snack.","background":"./game/backgrounds/backpack_room.png","character":{"happy":"./game/characters/Lina/pajamas/happy.png","sad":"./game/characters/Lina/pajamas/sad.png","default":"./game/characters/Lina/pajamas/base.png"},"backpack":{"image":"./game/items/backpack.png","dropZoneId":"bag_zone","scale":1,"position":{"x":50,"y":80}},"checklist":{"title":"Checklist","requirements":[{"id":"req_stationery","label":"Stationery","minCorrect":3},{"id":"req_snack","label":"Snack","minCorrect":1},{"id":"req_hygiene","label":"Hygiene","minCorrect":1}]},"items":[{"id":"it_gamepad","name":"Gamepad","category":"junk","isCorrect":false,"image":"./game/items/gamepad.png","x":20,"y":60},{"id":"it_napkins","name":"Napkins","category":"hygiene","isCorrect":true,"image":"./game/items/napkins.png","x":30,"y":60},{"id":"it_toy","name":"Toy Bear","category":"junk","isCorrect":true,"image":"./game/items/toy.png","message":"You are too old for this!","x":5,"y":80},{"id":"it_jumprope","name":"Jump Rope","category":"junk","isCorrect":false,"image":"./game/items/jumprope.png","x":28,"y":92},{"id":"it_pen","name":"Pen","category":"stationery","isCorrect":true,"image":"./game/items/pen.png","x":50,"y":49},{"id":"it_notebook","name":"Notebook","category":"stationery","isCorrect":true,"image":"./game/items/notebook.png","x":60,"y":62},{"id":"it_pencil","name":"Pencil","category":"stationery","isCorrect":true,"image":"./game/items/pencil.png","x":70,"y":50},{"id":"it_apple","name":"Apple","category":"snack","isCorrect":true,"image":"./game/items/apple.png","x":65,"y":85},{"id":"it_wrench","name":"Wrench","category":"junk","isCorrect":false,"image":"./game/items/wrench.png","x":92,"y":95}],"rules":{"mistakePenaltyHearts":1,"maxMistakesBeforeFail":2,"successGlow":true,"failGlow":true},"sounds":{"success":"./game/sfx/success.wav","fail":"./game/sfx/fail.wav","drop":"./game/sfx/drop.wav","clap":"./game/sfx/clap.wav","joy":"./game/sfx/joy.wav"}}},{"id":"lvl_breakfast","tier":1,"type":"cooking","title":"Make Breakfast","instruction":"This morning you'll make your own breakfast!","config":{"hint":"The tomato needs to be chopped first. Mum has already prepared everything else for you. Drag all the items to the left board, then collect them on the right board.","background":"./game/backgrounds/kitchen.png","ui":{"showStepPopupAtStart":true,"stepPopup":{"title":"Lina","lines":["Let's see what we have in the kitchen.","Follow the sequence. First, slice the food."]},"retryPopup":{"title":"Try again","text":"You made a mistake. You have a couple of tries, watch the hearts."}},"stations":{"fridgeZoneId":"fridge_zone","boardZoneId":"board_zone","plateZoneId":"plate_zone"},"layout":{"actors":[],"zones":{"fridge_zone":{"x":165,"y":10,"w":240,"h":580},"board_zone":{"x":260,"y":590,"w":620,"h":420},"plate_zone":{"x":940,"y":590,"w":620,"h":420}},"fridgeSlots":{"ing_tomato_whole":{"x":150,"y":152,"w":150,"h":150},"ing_bun_bottom":{"x":250,"y":152,"w":160,"h":160},"ing_cheese":{"x":150,"y":282,"w":150,"h":150},"ing_bun_top":{"x":250,"y":282,"w":160,"h":160},"ing_tomato_slice":{"x":115,"y":422,"w":150,"h":150}},"boardSlots":{"ing_tomato_whole":{"x":430,"y":720,"w":250,"h":250},"ing_tomato_slice":{"x":430,"y":720,"w":180,"h":180},"ing_bun_bottom":{"x":540,"y":720,"w":250,"h":250},"ing_cheese":{"x":300,"y":740,"w":230,"h":230},"ing_bun_top":{"x":700,"y":720,"w":250,"h":250}},"plateSlots":{"ing_bun_bottom":{"x":1270,"y":610,"w":280,"h":280,"z":21},"ing_cheese":{"x":1280,"y":600,"w":250,"h":250,"z":22},"ing_tomato_slice":{"x":1270,"y":590,"w":230,"h":230,"z":23},"ing_bun_top":{"x":1260,"y":560,"w":290,"h":290,"z":24}}},"recipe":{"title":"Sandwich","strictOrder":true,"steps":[{"id":"step_drag_tomato_to_board","action":"drag","itemId":"ing_tomato_whole","from":"fridge_zone","to":"board_zone","text":"Put the whole tomato on the board."},{"id":"step_cut_tomato","action":"tap","itemId":"ing_tomato_whole","on":"board_zone","tapsRequired":15,"tapSound":"cut","text":"Tap the tomato 15 times to slice it."},{"id":"step_drag_bun_bottom_to_board","action":"drag","itemId":"ing_bun_bottom","from":"fridge_zone","to":"board_zone","text":"Put the bottom bun on the board."},{"id":"step_drag_cheese_to_board","action":"drag","itemId":"ing_cheese","from":"fridge_zone","to":"board_zone","text":"Put the cheese on the board."},{"id":"step_drag_bun_top_to_board","action":"drag","itemId":"ing_bun_top","from":"fridge_zone","to":"board_zone","text":"Put the top bun on the board."},{"id":"step_drag_bun_bottom_to_plate","action":"drag","itemId":"ing_bun_bottom","from":"board_zone","to":"plate_zone","text":"Move the bottom bun to the plate."},{"id":"step_drag_cheese_to_plate","action":"drag","itemId":"ing_cheese","from":"board_zone","to":"plate_zone","text":"Move the cheese to the plate."},{"id":"step_drag_slice_to_plate","action":"drag","itemId":"ing_tomato_slice","from":"board_zone","to":"plate_zone","text":"Move the sliced tomato to the plate."},{"id":"step_drag_bun_top_to_plate","action":"drag","itemId":"ing_bun_top","from":"board_zone","to":"plate_zone","text":"Move the top bun to the plate to finish."}]},"ingredients":[{"id":"ing_tomato_whole","name":"Tomato (whole)","image":"./game/items/tomato_whole.png","initialZone":"fridge_zone","transformOnCompleteStepId":"step_cut_tomato","transformTo":{"hideSelf":true,"showIngredientId":"ing_tomato_slice"}},{"id":"ing_tomato_slice","name":"Tomato (sliced)","image":"./game/items/tomato_slice.png","initialZone":"fridge_zone","initiallyVisible":false},{"id":"ing_bun_bottom","name":"Bottom bun","image":"./game/items/bun_bottom.png","initialZone":"fridge_zone"},{"id":"ing_cheese","name":"Cheese","image":"./game/items/cheese.png","initialZone":"fridge_zone"},{"id":"ing_bun_top","name":"Top bun","image":"./game/items/bun_top.png","initialZone":"fridge_zone"}],"checklist":{"title":"Steps","bindToRecipeSteps":true,"strikeCompleted":true},"rules":{"mistakePenaltyHearts":1,"maxMistakesBeforeFail":2,"restartOnFail":true},"sounds":{"success":"./game/sfx/success.wav","fail":"./game/sfx/fail.wav","drop":"./game/sfx/drop.wav","cut":"./game/sfx/cut.wav","joy":"./game/sfx/joy.wav","clap":"./game/sfx/clap.wav"}}},{"id":"lvl_dress_up","tier":1,"type":"dress-up-iron","title":"Get Dressed","instruction":"It's time to get dressed and do it right!","config":{"hint":"Choose the right outfit and iron it. You don't have a physical education class on your timetable today.","backgrounds":{"closed":"./game/backgrounds/wardrobeclosed.png","opened":"./game/backgrounds/wardrobeopened.png","empty":"./game/backgrounds/wardrobeempty.png"},"character":{"pajamas":"./game/characters/Lina/pajamas/base.png","happy":"./game/characters/Lina/suit/happy.png"},"dialogs":{"intro":"Hmm... I need to get dressed. Mom told me to pick the right uniform.","closed":"Let's see what I have inside.","opened":"Tap on the wardrobe to take out clothes.","choice":"Choose wisely!","ironing":"It looks wrinkled! Iron it out with your finger."},"outfits":[{"id":"outfit_dirty","name":"Dirty Clothes","image":"./game/items/dirty_dress.png","isCorrect":false,"failMessage":"It's dirty! I can't go to school like this."},{"id":"outfit_school","name":"School Uniform","image":"./game/items/school_suit.png","isCorrect":true,"fabricTexture":"./game/items/fabric.png"},{"id":"outfit_sport","name":"Sport Suit","image":"./game/items/sport_suit.png","isCorrect":false,"failMessage":"This is for gym class, not for the first day!"}],"ironing":{"brushSize":40,"requiredCoverage":0.85},"sounds":{"success":"./game/sfx/success.wav","fail":"./game/sfx/fail.wav"}}},{"id":"lvl_maze_house_to_bus","tier":1,"type":"maze","title":"Get to the Bus","ui":{"introText":"Help Lina find the way to the bus!","introButton":"Got it!"},"instruction":"Now the main thing is to find the right path.","config":{"hint":"Use the arrows to move Lina. The bus is waiting for you at the bottom right of the maze.","background":"./game/backgrounds/maze_scene.png","mazeImage":"./game/backgrounds/maze_overlay.jpg","player":{"image":"./game/characters/Lina/suit/maze.png","scale":2},"maze":{"fromImage":"./game/backgrounds/maze_overlay.jpg","imageGrid":{"w":140,"h":140},"threshold":200,"invert":false,"cellSize":8,"start":{"x":7,"y":25},"finish":{"x":134,"y":124}},"controls":{"desktop":"arrows","mobile":"onScreenArrows"},"rules":{"timeLimitSec":0}}},{"id":"lvl_fix_wires","tier":2,"type":"wires-connect","instruction":"Things don't always go according to plan. But it's not your fault.","config":{"hint":"Connect the wires to the correct terminals. The terminals are the points where the wires connect.","background":"./game/backgrounds/wires.png","story":{"enterBusImage":"./game/story/enter_bus.png","driverSadImage":"./game/story/driver_sad.png","linaTalkImage":"./game/story/lina_help.png","brokenWiresImage":"./game/story/broken_wires.png","fixedWiresImage":"./game/story/fixed_wires.png","driverHappyImage":"./game/story/driver_happy.png"},"leftTerminals":[{"id":"l_yellow","color":"yellow","x":0.12,"y":0.22},{"id":"l_red","color":"red","x":0.12,"y":0.52},{"id":"l_blue","color":"blue","x":0.12,"y":0.8}],"rightTerminals":[{"id":"r_red","color":"red","x":0.88,"y":0.22},{"id":"r_blue","color":"blue","x":0.88,"y":0.58},{"id":"r_yellow","color":"yellow","x":0.88,"y":0.83}],"rules":{"allowCrossing":true,"mistakePenaltyHearts":1,"maxMistakesBeforeFail":2},"sounds":{"connect":"./game/sfx/connect.wav","fail":"./game/sfx/fail.wav","success":"./game/sfx/success.wav","cut":"./game/sfx/cut.wav","broken":"./game/sfx/broken_wires.wav","music":"./game/sfx/angel_music.wav"}}},{"id":"lvl_password","tier":2,"type":"password","title":"Enter Password","instruction":"Sometimes you have to use your smarts.","config":{"hint":"The password is the code that mom sent you. You need to remember three passwords.","rules":{"mistakePenaltyHearts":1,"maxMistakesBeforeFail":2},"sounds":{"success":"./game/sfx/success.wav","fail":"./game/sfx/fail.wav","ringtone":"./game/sfx/ringtone.wav","passwordmusic":"./game/sfx/passwordmusic.wav"}}},{"id":"tr_cross_road","tier":2,"type":"traffic-light","description":"Cross the Road","instruction":"The outside world is dangerous. Be careful.","config":{"hint":"Wait for the green light to cross the road. The red light means you can't cross the road.","background":"./game/backgrounds/crosswalk.png","story":{"exitBusImage":"./game/story/cross_road_1.png","aroundCross":"./game/story/cross_road_2.png","aroundSchool":"./game/story/cross_road_4.png"},"lights":[{"state":"red","durationMs":2200},{"state":"yellow","durationMs":900},{"state":"green","durationMs":1600}],"button":{"label":"GO","image":"./game/items/button_go.png"},"rules":{"pressOnGreenOnly":true,"pressOnRed":"mistake","pressOnYellow":"warning","warningText":"Wait!"},"visuals":{"gameoverImage":"./game/story/car_hit.png","warningFlash":true},"sounds":{"warning":"./game/sfx/warn.wav","success":"./game/sfx/success.wav"}}},{"id":"lvl_memory","tier":3,"type":"memory","title":"Find the Pairs","instruction":"A little excitement never hurts.","config":{"hint":"Match the pairs of cards to win! For a pair, you need to find two identical cards.","sounds":{"success":"./game/sfx/success.wav","fail":"./game/sfx/fail.wav","cardflip":"./game/sfx/cardflip.wav","cardmatch":"./game/sfx/cardmatch.wav"}}}]`),Jc={gameOver:{title:"Game Over",subtitle:"You ran out of hearts. Life does that sometimes.",image:"ui/game_over.png"},victory:{title:"Hooray, you made it to the classroom!",subtitle:"Statistics below. Printing is allowed by human laws.",image:"ui/victory.png",stats:{showTotalTime:!0,showLevelSequence:!0,showMistakes:!0,showHeartsLeft:!0,showComparisonToPrevious:!0,printEnabled:!0,storageKey:"sdj_best_run"},menu:[{id:"play_again",label:"Play Again"},{id:"close_game",label:"Close Game"},{id:"save_score",label:"Save Score for Next Time"}]}},Mn={meta:Kc,levels:Zc,endScreens:Jc};var Qc=y('<div class="game-complete-overlay svelte-vcv8q0"><div class="character-box svelte-vcv8q0"><img alt="Lina Happy" class="char-img svelte-vcv8q0"/> <div class="dialog-bubble svelte-vcv8q0"><p class="svelte-vcv8q0">Congratulations! You completed all levels!</p> <button class="svelte-vcv8q0">Finish the Game</button></div></div></div>'),eu=y('<div class="win-overlay svelte-vcv8q0"><div class="character-box svelte-vcv8q0"><img alt="Lina Happy" class="char-img svelte-vcv8q0"/> <div class="dialog-bubble svelte-vcv8q0"><p class="svelte-vcv8q0">Great! Everything is ready!</p> <p class="svelte-vcv8q0">What should I do next?</p> <button class="svelte-vcv8q0">Next Step âž¡</button></div></div></div>'),tu=y('<div class="gameover-overlay svelte-vcv8q0"><div class="character-box svelte-vcv8q0"><img alt="Lina Sad" class="char-img svelte-vcv8q0"/> <div class="dialog-bubble svelte-vcv8q0"><p class="svelte-vcv8q0">Oh noâ€¦ I made too many mistakes.</p> <button class="svelte-vcv8q0">Start again</button></div></div></div>'),nu=y("<!> <!>",1),ru=y('<p class="print-block svelte-vcv8q0"><b class="svelte-vcv8q0">Instruction:</b> </p>'),au=y('<p class="print-block svelte-vcv8q0"><b class="svelte-vcv8q0">Hint:</b> </p>'),su=y('<li class="svelte-vcv8q0"> </li>'),iu=y('<h2 class="print-subtitle svelte-vcv8q0">Intro</h2> <ul class="print-list svelte-vcv8q0"></ul>',1),ou=y('<li class="svelte-vcv8q0"> </li>'),lu=y('<h2 class="print-subtitle svelte-vcv8q0">Steps</h2> <ol class="print-list svelte-vcv8q0"></ol>',1),cu=y('<li class="svelte-vcv8q0"><b class="svelte-vcv8q0">Desktop:</b> </li>'),uu=y('<li class="svelte-vcv8q0"><b class="svelte-vcv8q0">Mobile:</b> </li>'),vu=y('<h2 class="print-subtitle svelte-vcv8q0">Controls</h2> <ul class="print-list svelte-vcv8q0"><!> <!></ul>',1),du=y('<div class="print-hints svelte-vcv8q0"><h1 class="print-title svelte-vcv8q0"> </h1> <!> <!> <!> <!> <!></div>'),fu=y('<div class="game-container svelte-vcv8q0"><!> <div class="game-screen svelte-vcv8q0"><!> <!> <!></div> <!></div>');function gu(t,n){$t(n,!1);const r=()=>wt(Zt,"$currentLevelIndex",c),a=()=>wt(Gr,"$levels",c),o=()=>wt(qr,"$forceMenuOpen",c),i=()=>wt(ur,"$characterOutfit",c),l=()=>wt(cn,"$hearts",c),f=()=>wt(Cn,"$gameTimer",c),u=()=>wt(ta,"$isTimerRunning",c),[c,h]=In(),v=_(),p=_(),m=_(),x=_(),R=_(),T=_(),$=_();let F=_(!1),O=null,X=_(!1),H=_(""),Q=_(!1);const B={pajamas:{happy:"./game/characters/Lina/pajamas/happy.png",sad:"./game/characters/Lina/pajamas/sad.png"},school_uniform:{happy:"./game/characters/Lina/suit/happy.png",sad:"./game/characters/Lina/suit/sad.png"}};function U(){s(F,!0);const z=r()+1;z>=a().length&&(ge(),ea(f()),Zt.set(z))}function K(){e(F)||cn.update(z=>Math.max(0,z-1))}function le(){s(F,!1);const z=r()+1;if(z>=a().length){ge(),ea(f()),da(f()),Zt.set(z);return}if(z>=0&&z<a().length){const ee=a()[z];ee?(s(H,ee.instruction||""),s(X,!0)):Zt.set(z)}else Zt.set(z)}function me(){s(X,!1);const z=r()+1;Zt.set(z)}function ne(){da(f()),Fn.set("results")}function Me(){if(document.querySelectorAll("audio").forEach(ee=>{ee.pause(),ee.currentTime=0}),typeof window<"u"&&window._passwordMusicSound)try{window._passwordMusicSound.pause(),window._passwordMusicSound.currentTime=0,window._passwordMusicSound=null}catch{}if(typeof window<"u"&&window._mazeMusicSound)try{window._mazeMusicSound.pause(),window._mazeMusicSound.currentTime=0,window._mazeMusicSound=null}catch{}ge(),fa(),Cn.set(0),cn.set(3),Zt.set(0),ur.set("pajamas"),s(F,!1)}function Le(){ge(),fa(),Cn.set(0),cn.set(Mn.meta?.totalHearts||3),Zt.set(0),ur.set("pajamas"),s(F,!1),Cs.set(Mn);const z=Ls(Mn);if(Gr.set(z),document.querySelectorAll("audio").forEach(de=>{de.pause(),de.currentTime=0}),typeof window<"u"&&window._passwordMusicSound)try{window._passwordMusicSound.pause(),window._passwordMusicSound.currentTime=0,window._passwordMusicSound=null}catch{}if(typeof window<"u"&&window._mazeMusicSound)try{window._mazeMusicSound.pause(),window._mazeMusicSound.currentTime=0,window._mazeMusicSound=null}catch{}Fn.set("intro")}function G(){O||(ta.set(!0),O=setInterval(()=>{Cn.update(z=>z+1)},1e3))}function ge(){O&&(clearInterval(O),O=null),ta.set(!1)}fn(()=>{a().length>0&&r()===0&&G()}),On(()=>{ge()}),ie(()=>(r(),a()),()=>{s(v,r()>=0&&r()<a().length?a()[r()]:null)}),ie(()=>(r(),a()),()=>{s(p,r()>=a().length)}),ie(()=>(o(),qr),()=>{o()&&(s(Q,!0),qr.set(!1))}),ie(()=>i(),()=>{s(m,B[i()]||B.pajamas)}),ie(()=>(i(),e(v)),()=>{s(x,i()!=="pajamas"?B[i()]?.happy||B.pajamas.happy:e(v)?.config?.character?.happy||B.pajamas.happy)}),ie(()=>(i(),e(v)),()=>{s(R,i()!=="pajamas"?B[i()]?.sad||B.pajamas.sad:e(v)?.config?.character?.sad||B.pajamas.sad)}),ie(()=>(l(),e(v),r()),()=>{s(T,l()<=0&&!(e(v)?.config?.rules?.restartOnFail&&r()===0))}),ie(()=>(e(T),f()),()=>{e(T)&&(ge(),ea(f()))}),ie(()=>(e(v),Da),()=>{s($,e(v)?Da(e(v).type):null)}),ie(()=>(e(v),r(),u()),()=>{e(v)&&(document.querySelectorAll("audio").forEach(ee=>{ee.pause(),ee.currentTime=0}),r()===0&&!u()&&G())}),dn(),Rt();var C=fu(),A=d(C);{var N=z=>{Xc(z,{get instruction(){return e(H)},$$events:{complete:me}})};I(A,z=>{e(X)&&z(N)})}var W=b(A,2),q=d(W);{var _e=z=>{var ee=Ie(),de=oe(ee);ro(de,()=>e($),(he,j)=>{j(he,{get data(){return e(v)},$$events:{complete:U,mistake:K,restartGame:Me}})}),g(z,ee)},be=z=>{var ee=Ie(),de=oe(ee);{var he=j=>{var P=Qc(),xe=d(P),ce=d(xe),ke=b(ce,2),ze=b(d(ke),2);L(()=>D(ce,"src",e(x))),E("click",ze,ne),g(j,P)};I(de,j=>{e(p)&&j(he)},!0)}g(z,ee)};I(q,z=>{e(v)&&e($)&&!e(X)?z(_e):z(be,!1)})}var Re=b(q,2);{var Ae=z=>{var ee=eu(),de=d(ee),he=d(de),j=b(he,2),P=b(d(j),4);L(()=>D(he,"src",e(x))),E("click",P,le),g(z,ee)},Fe=z=>{var ee=Ie(),de=oe(ee);{var he=j=>{var P=tu(),xe=d(P),ce=d(xe),ke=b(ce,2),ze=b(d(ke),2);L(()=>D(ce,"src",e(R))),E("click",ze,Me),g(j,P)};I(de,j=>{e(T)&&j(he)},!0)}g(z,ee)};I(Re,z=>{e(F)&&!e(p)?z(Ae):z(Fe,!1)})}var Je=b(Re,2);{var Ne=z=>{var ee=nu(),de=oe(ee);{let j=Jt(()=>(e(v),w(()=>e(v).config?.hint||"Text will be here.")));Wc(de,{get hintText(){return e(j)}})}var he=b(de,2);So(he,{get isOpen(){return e(Q)},set isOpen(j){s(Q,j)},children:(j,P)=>{var xe=Ie(),ce=oe(xe);{var ke=ze=>{$o(ze,{onRestart:Le,onContinue:()=>{},onClose:()=>s(Q,!1)})};I(ce,ze=>{e(Q)&&ze(ke)})}g(j,xe)},$$slots:{default:!0},$$legacy:!0}),g(z,ee)};I(Je,z=>{(e(v)&&!e(F)&&!e(T)&&!e(X)||e(p))&&z(Ne)})}var Qe=b(W,2);{var ae=z=>{var ee=du(),de=d(ee),he=d(de),j=b(de,2);{var P=te=>{var M=ru(),Y=b(d(M));L(()=>Z(Y,` ${e(v),w(()=>e(v).instruction)??""}`)),g(te,M)};I(j,te=>{e(v),w(()=>e(v).instruction)&&te(P)})}var xe=b(j,2);{var ce=te=>{var M=au(),Y=b(d(M));L(()=>Z(Y,` ${e(v),w(()=>e(v).config.hint)??""}`)),g(te,M)};I(xe,te=>{e(v),w(()=>e(v).config?.hint)&&te(ce)})}var ke=b(xe,2);{var ze=te=>{var M=iu(),Y=b(oe(M),2);it(Y,5,()=>(e(v),w(()=>e(v).config.ui.stepPopup.lines)),xt,(ue,ye)=>{var ve=su(),Ce=d(ve);L(()=>Z(Ce,e(ye))),g(ue,ve)}),g(te,M)};I(ke,te=>{e(v),w(()=>e(v).config?.ui?.stepPopup?.lines?.length)&&te(ze)})}var Ee=b(ke,2);{var et=te=>{var M=lu(),Y=b(oe(M),2);it(Y,5,()=>(e(v),w(()=>e(v).config.recipe.steps)),xt,(ue,ye)=>{var ve=Ie(),Ce=oe(ve);{var $e=Oe=>{var qe=ou(),Pe=d(qe);L(()=>Z(Pe,(e(ye),w(()=>e(ye).text)))),g(Oe,qe)};I(Ce,Oe=>{e(ye),w(()=>e(ye)?.text)&&Oe($e)})}g(ue,ve)}),g(te,M)};I(Ee,te=>{e(v),w(()=>e(v).config?.recipe?.steps?.length)&&te(et)})}var Lt=b(Ee,2);{var gt=te=>{var M=vu(),Y=b(oe(M),2),ue=d(Y);{var ye=$e=>{var Oe=cu(),qe=b(d(Oe));L(()=>Z(qe,` ${e(v),w(()=>e(v).config.controls.desktop)??""}`)),g($e,Oe)};I(ue,$e=>{e(v),w(()=>e(v).config?.controls?.desktop)&&$e(ye)})}var ve=b(ue,2);{var Ce=$e=>{var Oe=uu(),qe=b(d(Oe));L(()=>Z(qe,` ${e(v),w(()=>e(v).config.controls.mobile)??""}`)),g($e,Oe)};I(ve,$e=>{e(v),w(()=>e(v).config?.controls?.mobile)&&$e(Ce)})}g(te,M)};I(Lt,te=>{e(v),w(()=>e(v).config?.controls?.desktop||e(v).config?.controls?.mobile)&&te(gt)})}L(()=>Z(he,(e(v),w(()=>e(v).title??"")))),g(z,ee)};I(Qe,z=>{e(v)&&z(ae)})}g(t,C),Mt(),h()}var pu=y('<span class="heart">â¤ï¸</span>'),hu=y('<div class="hud svelte-se4dbo"><div class="hearts svelte-se4dbo"></div> <div class="center-section svelte-se4dbo"><div class="timer svelte-se4dbo"> </div></div> <div class="progress svelte-se4dbo"> </div></div>');function mu(t,n){$t(n,!1);const r=()=>wt(cn,"$hearts",l),a=()=>wt(Cn,"$gameTimer",l),o=()=>wt(Zt,"$currentLevelIndex",l),i=()=>wt(Gr,"$levels",l),[l,f]=In();Rt();var u=hu(),c=d(u);it(c,5,()=>Array(r()),xt,(R,T)=>{var $=pu();g(R,$)});var h=b(c,2),v=d(h),p=d(v),m=b(h,2),x=d(m);L(R=>{Z(p,`â±ï¸ ${R??""}`),Z(x,`Level: ${o()+1} / ${i().length??""}`)},[()=>Nr(a())]),g(t,u),Mt(),f()}var _u=y('<div class="screen svelte-1n46o8q"><h1>School Journey</h1> <button class="svelte-1n46o8q">Start Game</button></div>'),bu=y('<div class="screen game-screen svelte-1n46o8q"><!> <!></div>'),yu=y('<div class="screen svelte-1n46o8q"><h1>Results</h1> <button class="svelte-1n46o8q">Back to Menu</button></div>'),wu=y("<!> <main><!></main>",1);function xu(t,n){$t(n,!1);const r=()=>wt(Fn,"$currentScreen",a),[a,o]=In();function i(){Cs.set(Mn),cn.set(Mn.meta?.totalHearts||3);const R=Ls(Mn);Gr.set(R),Cn.set(0),Zt.set(0),fa()}function l(){i(),Mn?.meta?.intro?.slides?.length?Fn.set("intro"):Fn.set("game")}function f(){Fn.set("game")}function u(){Fn.set("menu")}Rt();var c=wu(),h=oe(c);_o(h,{});var v=b(h,2),p=d(v);{var m=R=>{var T=_u(),$=b(d(T),2);E("click",$,l),g(R,T)},x=R=>{var T=Ie(),$=oe(T);{var F=X=>{{let H=Jt(()=>Mn?.meta?.intro);ko(X,{get intro(){return e(H)},$$events:{done:f}})}},O=X=>{var H=Ie(),Q=oe(H);{var B=K=>{var le=bu(),me=d(le);mu(me,{});var ne=b(me,2);gu(ne,{}),g(K,le)},U=K=>{var le=Ie(),me=oe(le);{var ne=Me=>{var Le=yu(),G=b(d(Le),2);E("click",G,u),g(Me,Le)};I(me,Me=>{r()==="results"&&Me(ne)},!0)}g(K,le)};I(Q,K=>{r()==="game"?K(B):K(U,!1)},!0)}g(X,H)};I($,X=>{r()==="intro"?X(F):X(O,!1)},!0)}g(R,T)};I(p,R=>{r()==="menu"?R(m):R(x,!1)})}g(t,c),Mt(),o()}Ki(xu,{target:document.getElementById("app")});
